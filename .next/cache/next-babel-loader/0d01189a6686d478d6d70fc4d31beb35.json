{"ast":null,"code":"var _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport { Col, Form, Icon, message, Row } from 'antd';\nimport _ from 'lodash';\nimport { withRouter } from 'next/router';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { arrayLengthCount, notEmptyLength } from '../../common-function';\nimport client from '../../feathers';\nimport { loading } from '../../redux/actions/app-actions';\nimport { updateSellerProfile } from '../../redux/actions/sellerProfile-actions';\nimport WindowScrollLoadWrapper from '../general/WindowScrollLoadWrapper';\nimport UserPosts from './UserPosts';\nimport InfiniteScrollWrapper from '../general/InfiniteScrollWrapper';\n\nvar moment = require('moment');\n\nvar POSTSIZE = 11;\n\nvar UserCarFreakPosts = function UserCarFreakPosts(props) {\n  _s();\n\n  var _useState = useState({}),\n      profile = _useState[0],\n      setProfile = _useState[1];\n\n  var _useState2 = useState([]),\n      postLikes = _useState2[0],\n      setPostLikes = _useState2[1];\n\n  var _useState3 = useState([]),\n      posts = _useState3[0],\n      setPosts = _useState3[1];\n\n  var _useState4 = useState(0),\n      postTotal = _useState4[0],\n      setPostTotal = _useState4[1];\n\n  var _useState5 = useState(1),\n      postPage = _useState5[0],\n      setPostPage = _useState5[1];\n\n  var _useState6 = useState(false),\n      postLoading = _useState6[0],\n      setPostLoading = _useState6[1];\n\n  useEffect(function () {\n    getUserChatLikes(_.map(posts, '_id'));\n  }, [props.user.authenticated]);\n  useEffect(function () {\n    if (_.isPlainObject(props.data) && !_.isEmpty(props.data)) {\n      setProfile(props.data);\n    } else {\n      setProfile({});\n    }\n  }, [props.data]);\n  useEffect(function () {\n    if (_.get(profile, ['_id'])) {\n      if (postPage == 1) {\n        getPosts(0);\n      } else {\n        setPostPage(1);\n      }\n    } else {\n      setPosts([]);\n      setPostTotal(0);\n      setPostPage(1);\n    }\n  }, [profile]);\n  useEffect(function () {}, [posts, postTotal, postLoading]);\n  useEffect(function () {\n    getPosts((postPage - 1) * POSTSIZE);\n  }, [postPage]);\n\n  function getPosts(skip) {\n    if (_.get(profile, ['_id'])) {\n      if (_.isNumber(skip)) {\n        skip = parseInt(skip);\n      } else {\n        skip = 0;\n      }\n\n      setPostLoading(true);\n      client.service('chats').find({\n        query: {\n          createdBy: _.get(profile, ['_id']),\n          chatType: 'carfreaks',\n          $and: [{\n            parentType: {\n              $ne: 'club'\n            }\n          }, {\n            parentType: {\n              $ne: 'clubEvent'\n            }\n          }],\n          $sort: {\n            createdAt: -1\n          },\n          $limit: POSTSIZE,\n          $populate: 'userId',\n          $skip: skip\n        }\n      }).then(function (res) {\n        setPostLoading(false);\n\n        if (notEmptyLength(res.data)) {\n          setPosts(postPage == 1 ? res.data : posts.concat(res.data));\n          setPostTotal(res.total);\n          getUserChatLikes(_.map(res.data, '_id'), true);\n        }\n      })[\"catch\"](function (err) {\n        setPostLoading(false);\n        message.error(err.message);\n      });\n    }\n  }\n\n  function getUserChatLikes(ids, concat) {\n    if (_.isArray(ids) && !_.isEmpty(ids) && _.get(props.user, ['authenticated']) && _.get(props.user, ['info', 'user', '_id'])) {\n      client.service('chatlikes').find({\n        query: {\n          chatId: {\n            $in: ids || []\n          },\n          userId: _.get(props.user, ['info', 'user', '_id'])\n        }\n      }).then(function (res) {\n        setPostLikes(concat ? _.concat(postLikes, res.data) : res.data);\n      });\n    }\n  }\n\n  return __jsx(Row, {\n    className: \"margin-top-md\"\n  }, __jsx(Col, {\n    xs: 24,\n    sm: 24,\n    md: 24,\n    lg: 24,\n    xl: 24\n  }, __jsx(InfiniteScrollWrapper, {\n    onScrolledBottom: function onScrolledBottom() {\n      if (arrayLengthCount(posts) < postTotal && !postLoading) {\n        setPostPage(postPage + 1);\n      }\n    },\n    hasMore: !postLoading && arrayLengthCount(posts) < postTotal\n  }, __jsx(UserPosts, {\n    posts: posts,\n    postLikes: postLikes,\n    showAddPostCard: _.get(props.user, ['authenticated']) ? _.get(profile, ['_id']) == _.get(props.user, ['info', 'user', '_id']) : false,\n    onUpdatePost: function onUpdatePost(data) {\n      if (_.isPlainObject(data) && !_.isEmpty(data)) {\n        var newPosts = _.map(posts, function (post) {\n          return post._id == data._id ? data : post;\n        });\n\n        setPosts(newPosts);\n      }\n    },\n    onCreatePost: function onCreatePost(data) {\n      if (_.isPlainObject(data) && !_.isEmpty(data)) {\n        var newPosts = _.concat([data], posts);\n\n        setPosts(newPosts);\n      }\n    },\n    onUpdatePostLikes: function onUpdatePostLikes(data) {\n      if (_.isArray(data) && !_.isEmpty(data)) {\n        setPostLikes(data);\n      }\n    }\n  }))));\n};\n\n_s(UserCarFreakPosts, \"lq8UxRHFBQN1JwA9I88DTK+uKtw=\");\n\n_c = UserCarFreakPosts;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    app: state.app,\n    user: state.user,\n    sellerProfile: state.sellerProfile\n  };\n};\n\nvar mapDispatchToProps = {\n  loading: loading,\n  updateSellerProfile: updateSellerProfile\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Form.create()(withRouter(UserCarFreakPosts)));\n\nvar _c;\n\n$RefreshReg$(_c, \"UserCarFreakPosts\");","map":{"version":3,"sources":["/Users/faraheen/ccar-cms-next-mobile/components/profile/UserCarFreakPosts.jsx"],"names":["Col","Form","Icon","message","Row","_","withRouter","React","useEffect","useState","connect","arrayLengthCount","notEmptyLength","client","loading","updateSellerProfile","WindowScrollLoadWrapper","UserPosts","InfiniteScrollWrapper","moment","require","POSTSIZE","UserCarFreakPosts","props","profile","setProfile","postLikes","setPostLikes","posts","setPosts","postTotal","setPostTotal","postPage","setPostPage","postLoading","setPostLoading","getUserChatLikes","map","user","authenticated","isPlainObject","data","isEmpty","get","getPosts","skip","isNumber","parseInt","service","find","query","createdBy","chatType","$and","parentType","$ne","$sort","createdAt","$limit","$populate","$skip","then","res","concat","total","err","error","ids","isArray","chatId","$in","userId","newPosts","post","_id","mapStateToProps","state","app","sellerProfile","mapDispatchToProps","create"],"mappings":"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","sourcesContent":["import { Col, Form, Icon, message, Row } from 'antd';\nimport _ from 'lodash';\nimport { withRouter } from 'next/router';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { arrayLengthCount, notEmptyLength } from '../../common-function';\nimport client from '../../feathers';\nimport { loading } from '../../redux/actions/app-actions';\nimport { updateSellerProfile } from '../../redux/actions/sellerProfile-actions';\nimport WindowScrollLoadWrapper from '../general/WindowScrollLoadWrapper';\nimport UserPosts from './UserPosts';\nimport InfiniteScrollWrapper from '../general/InfiniteScrollWrapper';\n\n\nvar moment = require('moment');\n\nconst POSTSIZE = 11;\nconst UserCarFreakPosts = (props) => {\n\n    const [profile, setProfile] = useState({})\n    const [postLikes, setPostLikes] = useState([]);\n    const [posts, setPosts] = useState([]);\n    const [postTotal, setPostTotal] = useState(0);\n    const [postPage, setPostPage] = useState(1);\n    const [postLoading, setPostLoading] = useState(false);\n\n    useEffect(() => {\n        getUserChatLikes(_.map(posts, '_id'))\n    }, [props.user.authenticated])\n\n    useEffect(() => {\n        if (_.isPlainObject(props.data) && !_.isEmpty(props.data)) {\n            setProfile(props.data);\n        } else {\n            setProfile({});\n        }\n    }, [props.data])\n\n    useEffect(() => {\n        if (_.get(profile, ['_id'])) {\n            if (postPage == 1) {\n                getPosts(0)\n            } else {\n                setPostPage(1);\n            }\n        } else {\n            setPosts([])\n            setPostTotal(0);\n            setPostPage(1);\n        }\n    }, [profile])\n\n    useEffect(() => {\n\n    }, [posts, postTotal, postLoading])\n\n    useEffect(() => {\n        getPosts((postPage - 1) * POSTSIZE);\n    }, [postPage])\n\n    function getPosts(skip) {\n        if (_.get(profile, ['_id'])) {\n            if (_.isNumber(skip)) {\n                skip = parseInt(skip)\n            } else {\n                skip = 0;\n            }\n            setPostLoading(true);\n            client.service('chats').find({\n                query: {\n                    createdBy: _.get(profile, ['_id']),\n                    chatType: 'carfreaks',\n                    $and: [\n                        {\n                            parentType: { $ne: 'club' }\n                        },\n                        {\n                            parentType: { $ne: 'clubEvent' }\n                        },\n                    ],\n                    $sort: {\n                        createdAt: -1,\n                    },\n                    $limit: POSTSIZE,\n                    $populate: 'userId',\n                    $skip: skip,\n                }\n            }).then(res => {\n                setPostLoading(false);\n                if (notEmptyLength(res.data)) {\n                    setPosts(postPage == 1 ? res.data : posts.concat(res.data));\n                    setPostTotal(res.total)\n                    getUserChatLikes(_.map(res.data, '_id'), true)\n                }\n            }).catch(err => {\n                setPostLoading(false);\n                message.error(err.message)\n            });\n        }\n    }\n\n    function getUserChatLikes(ids, concat) {\n\n        if (_.isArray(ids) && !_.isEmpty(ids) && _.get(props.user, ['authenticated']) && _.get(props.user, ['info', 'user', '_id'])) {\n            client.service('chatlikes')\n                .find({\n                    query: {\n                        chatId: {\n                            $in: ids || [],\n                        },\n                        userId: _.get(props.user, ['info', 'user', '_id'])\n                    }\n                })\n                .then((res) => {\n                    setPostLikes(concat ? _.concat(postLikes, res.data) : res.data)\n                })\n        }\n    }\n    return (\n        <Row className='margin-top-md'>\n            <Col xs={24} sm={24} md={24} lg={24} xl={24}>\n\n                <InfiniteScrollWrapper\n                    onScrolledBottom={() => {\n                        if (arrayLengthCount(posts) < postTotal && !postLoading) {\n                            setPostPage(postPage + 1);\n                        }\n                    }}\n                    hasMore={!postLoading && arrayLengthCount(posts) < postTotal}\n\n                >\n                    <UserPosts\n                        posts={posts}\n                        postLikes={postLikes}\n                        showAddPostCard={_.get(props.user, ['authenticated']) ? _.get(profile, ['_id']) == _.get(props.user, ['info', 'user', '_id']) : false}\n                        onUpdatePost={(data) => {\n                            if (_.isPlainObject(data) && !_.isEmpty(data)) {\n                                let newPosts = _.map(posts, function (post) {\n                                    return post._id == data._id ? data : post;\n                                })\n                                setPosts(newPosts); \n                            }\n                        }}\n                        onCreatePost={(data) => {\n                            if (_.isPlainObject(data) && !_.isEmpty(data)) {\n                                let newPosts = _.concat([data], posts)\n                                setPosts(newPosts);\n                            }\n                        }}\n                        onUpdatePostLikes={(data) => {\n                            if (_.isArray(data) && !_.isEmpty(data)) {\n                                setPostLikes(data);\n                            }\n                        }}\n                    />\n                </InfiniteScrollWrapper>\n            </Col>\n        </Row>\n    );\n}\n\n\nconst mapStateToProps = state => ({\n    app: state.app,\n    user: state.user,\n    sellerProfile: state.sellerProfile,\n});\n\nconst mapDispatchToProps = {\n    loading: loading,\n    updateSellerProfile: updateSellerProfile,\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Form.create()(withRouter(UserCarFreakPosts)));"]},"metadata":{},"sourceType":"module"}