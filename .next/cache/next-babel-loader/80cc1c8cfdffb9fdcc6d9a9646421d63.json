{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { LOGIN_SUCCESSFUL, LOGOUT_SUCCESSFUL, SET_USER, ADDRESS_BOOK_FORM, CARD_FORM, BANK_FORM } from '../actions/user-actions';\nimport { checkIsNeedPersist, checkNeedPersist, getLocalStoragePersistStates, getPersistObj, persistRedux } from '../config';\nimport _ from 'lodash';\nimport localStorage from 'local-storage';\nimport { isValidNumber } from '../../common-function';\nvar INITIAL_STATE = {\n  info: {\n    user: {\n      _id: null\n    }\n  },\n  authenticated: false,\n  loading: false,\n  errors: {},\n  addressForm: {},\n  cardForm: {},\n  bankForm: {}\n};\nexport default function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_STATE;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var persistStates = _.get(localStorage.get('redux') || {}, 'user') || INITIAL_STATE;\n\n  var newState = _objectSpread(_objectSpread({}, state), persistStates); // checkNeedPersist(_.get(action, 'type'), 'user', _.get(action, 'payload'), _.get(action, 'isRestoreData'));\n\n\n  if (!_.isEqual(state, newState)) {\n    state = newState;\n  }\n\n  switch (action.type) {\n    case LOGIN_SUCCESSFUL:\n      state = _objectSpread(_objectSpread({}, state), {}, {\n        authenticated: true,\n        info: action.payload\n      });\n      break;\n\n    case LOGOUT_SUCCESSFUL:\n      state = _objectSpread(_objectSpread({}, state), {}, {\n        authenticated: false,\n        info: {}\n      });\n      break;\n\n    case SET_USER:\n      state = _objectSpread(_objectSpread({}, state), {}, {\n        info: _objectSpread(_objectSpread({}, state.info), {}, {\n          user: action.payload\n        })\n      });\n      break;\n\n    case ADDRESS_BOOK_FORM:\n      state = _objectSpread(_objectSpread({}, state), {}, {\n        addressForm: action.payload\n      });\n      break;\n\n    case CARD_FORM:\n      state = _objectSpread(_objectSpread({}, state), {}, {\n        cardForm: action.payload\n      });\n      break;\n\n    case BANK_FORM:\n      state = _objectSpread(_objectSpread({}, state), {}, {\n        bankForm: action.payload\n      });\n      break;\n\n    default:\n      break;\n  }\n\n  persistRedux('user', state);\n  return state;\n}","map":{"version":3,"sources":["/Users/faraheen/ccar-cms-next-mobile/redux/reducers/user-reducer.js"],"names":["LOGIN_SUCCESSFUL","LOGOUT_SUCCESSFUL","SET_USER","ADDRESS_BOOK_FORM","CARD_FORM","BANK_FORM","checkIsNeedPersist","checkNeedPersist","getLocalStoragePersistStates","getPersistObj","persistRedux","_","localStorage","isValidNumber","INITIAL_STATE","info","user","_id","authenticated","loading","errors","addressForm","cardForm","bankForm","state","action","persistStates","get","newState","isEqual","type","payload"],"mappings":";;;;;;AAAA,SAASA,gBAAT,EAA2BC,iBAA3B,EAA8CC,QAA9C,EAAwDC,iBAAxD,EAA2EC,SAA3E,EAAsFC,SAAtF,QAAuG,yBAAvG;AACA,SAASC,kBAAT,EAA6BC,gBAA7B,EAA+CC,4BAA/C,EAA6EC,aAA7E,EAA4FC,YAA5F,QAAgH,WAAhH;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,YAAP,MAAyB,eAAzB;AACA,SAASC,aAAT,QAA8B,uBAA9B;AAGA,IAAMC,aAAa,GAAG;AACpBC,EAAAA,IAAI,EAAE;AACJC,IAAAA,IAAI,EAAE;AACJC,MAAAA,GAAG,EAAE;AADD;AADF,GADc;AAMpBC,EAAAA,aAAa,EAAE,KANK;AAOpBC,EAAAA,OAAO,EAAE,KAPW;AAQpBC,EAAAA,MAAM,EAAE,EARY;AASpBC,EAAAA,WAAW,EAAE,EATO;AAUpBC,EAAAA,QAAQ,EAAE,EAVU;AAWpBC,EAAAA,QAAQ,EAAE;AAXU,CAAtB;AAaA,eAAe,YAAyC;AAAA,MAA/BC,KAA+B,uEAAvBV,aAAuB;AAAA,MAARW,MAAQ;AAGtD,MAAIC,aAAa,GAAGf,CAAC,CAACgB,GAAF,CAAMf,YAAY,CAACe,GAAb,CAAiB,OAAjB,KAA6B,EAAnC,EAAuC,MAAvC,KAAkDb,aAAtE;;AACA,MAAIc,QAAQ,mCACPJ,KADO,GAEPE,aAFO,CAAZ,CAJsD,CAQtD;;;AAEA,MAAG,CAACf,CAAC,CAACkB,OAAF,CAAUL,KAAV,EAAiBI,QAAjB,CAAJ,EAA+B;AAC7BJ,IAAAA,KAAK,GAAGI,QAAR;AACD;;AACD,UAAQH,MAAM,CAACK,IAAf;AACE,SAAK9B,gBAAL;AACEwB,MAAAA,KAAK,mCACAA,KADA;AAEHN,QAAAA,aAAa,EAAE,IAFZ;AAGHH,QAAAA,IAAI,EAAEU,MAAM,CAACM;AAHV,QAAL;AAKA;;AACF,SAAK9B,iBAAL;AACEuB,MAAAA,KAAK,mCACAA,KADA;AAEHN,QAAAA,aAAa,EAAE,KAFZ;AAGHH,QAAAA,IAAI,EAAE;AAHH,QAAL;AAKA;;AACF,SAAKb,QAAL;AACEsB,MAAAA,KAAK,mCACAA,KADA;AAEHT,QAAAA,IAAI,kCACCS,KAAK,CAACT,IADP;AAEFC,UAAAA,IAAI,EAAES,MAAM,CAACM;AAFX;AAFD,QAAL;AAOA;;AACF,SAAK5B,iBAAL;AACEqB,MAAAA,KAAK,mCACAA,KADA;AAEHH,QAAAA,WAAW,EAAEI,MAAM,CAACM;AAFjB,QAAL;AAIA;;AACF,SAAK3B,SAAL;AACEoB,MAAAA,KAAK,mCACAA,KADA;AAEHF,QAAAA,QAAQ,EAAEG,MAAM,CAACM;AAFd,QAAL;AAIA;;AACF,SAAK1B,SAAL;AACEmB,MAAAA,KAAK,mCACAA,KADA;AAEHD,QAAAA,QAAQ,EAAEE,MAAM,CAACM;AAFd,QAAL;AAIA;;AACF;AACE;AA3CJ;;AA8CArB,EAAAA,YAAY,CAAC,MAAD,EAASc,KAAT,CAAZ;AACA,SAAOA,KAAP;AAED","sourcesContent":["import { LOGIN_SUCCESSFUL, LOGOUT_SUCCESSFUL, SET_USER, ADDRESS_BOOK_FORM, CARD_FORM, BANK_FORM } from '../actions/user-actions';\nimport { checkIsNeedPersist, checkNeedPersist, getLocalStoragePersistStates, getPersistObj, persistRedux } from '../config';\nimport _ from 'lodash';\nimport localStorage from 'local-storage';\nimport { isValidNumber } from '../../common-function';\n\n\nconst INITIAL_STATE = {\n  info: {\n    user: {\n      _id: null,\n    }\n  },\n  authenticated: false,\n  loading: false,\n  errors: {},\n  addressForm: {},\n  cardForm: {},\n  bankForm: {},\n}\nexport default function (state = INITIAL_STATE, action) {\n\n\n  let persistStates = _.get(localStorage.get('redux') || {}, 'user') || INITIAL_STATE;\n  let newState = {\n    ...state,\n    ...persistStates\n  }\n  // checkNeedPersist(_.get(action, 'type'), 'user', _.get(action, 'payload'), _.get(action, 'isRestoreData'));\n\n  if(!_.isEqual(state, newState)){\n    state = newState;\n  }\n  switch (action.type) {\n    case LOGIN_SUCCESSFUL:\n      state = {\n        ...state,\n        authenticated: true,\n        info: action.payload\n      }\n      break;\n    case LOGOUT_SUCCESSFUL:\n      state = {\n        ...state,\n        authenticated: false,\n        info: {}\n      }\n      break;\n    case SET_USER:\n      state = {\n        ...state,\n        info: {\n          ...state.info,\n          user: action.payload,\n        }\n      }\n      break;\n    case ADDRESS_BOOK_FORM:\n      state = {\n        ...state,\n        addressForm: action.payload,\n      }\n      break;\n    case CARD_FORM:\n      state = {\n        ...state,\n        cardForm: action.payload,\n      }\n      break;\n    case BANK_FORM:\n      state = {\n        ...state,\n        bankForm: action.payload,\n      }\n      break;\n    default:\n      break;\n  }\n\n  persistRedux('user', state);\n  return state;\n\n}\n"]},"metadata":{},"sourceType":"module"}