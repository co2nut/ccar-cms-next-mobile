{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { AppstoreOutlined, BarsOutlined } from '@ant-design/icons';\nimport { Button, Col, Divider, Empty, Form, Icon, message, Pagination, Radio, Row, Select, Switch, Tooltip } from 'antd';\nimport axios from 'axios';\nimport _ from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { useMediaQuery } from 'react-responsive';\nimport client from '../../feathers';\nimport { getCarBrand } from '../../params/carBrandsList';\nimport { filterBodyTypes, filterCarBrandMode, filterCarBrands, filterCarModelMode, filterCarModels, filterCarSearchKeywords, filterColors, filterDrivenWheels, filterFuelTypes, filterStates, loading, quickSearchProductsList, setApplyMileage, setApplyPrice, setApplyYear, updateActiveMenu } from '../../redux/actions/app-actions';\nimport { convertParameterToProductListUrl, formatNumber, notEmptyLength, objectRemoveEmptyValue } from '../../common-function';\nimport GridProductList from '../product-list/grid-product-list';\nimport ProductList from '../product-list/ProductList';\nimport { fetchProductsList, updateActiveIdProductList } from '../../redux/actions/productsList-actions';\nimport { withRouter } from 'next/router';\n\nvar Desktop = function Desktop(_ref) {\n  _s();\n\n  var children = _ref.children;\n  var isDesktop = useMediaQuery({\n    minWidth: 992\n  });\n  return isDesktop ? children : null;\n};\n\n_s(Desktop, \"OwvWUQgjrMnuU8GZKzxgeJ0yhK4=\", false, function () {\n  return [useMediaQuery];\n});\n\n_c = Desktop;\n\nvar Tablet = function Tablet(_ref2) {\n  _s2();\n\n  var children = _ref2.children;\n  var isTablet = useMediaQuery({\n    minWidth: 768,\n    maxWidth: 991\n  });\n  return isTablet ? children : null;\n};\n\n_s2(Tablet, \"njizuzyQ3ji1lkog3PzXeuhAluo=\", false, function () {\n  return [useMediaQuery];\n});\n\n_c2 = Tablet;\n\nvar Mobile = function Mobile(_ref3) {\n  _s3();\n\n  var children = _ref3.children;\n  var isMobile = useMediaQuery({\n    maxWidth: 767\n  });\n  return isMobile ? children : null;\n};\n\n_s3(Mobile, \"7khsyUHgctuHIPa2/KlDS6LcnT0=\", false, function () {\n  return [useMediaQuery];\n});\n\n_c3 = Mobile;\n\nvar Default = function Default(_ref4) {\n  _s4();\n\n  var children = _ref4.children;\n  var isNotMobile = useMediaQuery({\n    minWidth: 768\n  });\n  return isNotMobile ? children : null;\n};\n\n_s4(Default, \"39ICqmTSeKHbKDzaMnrZFzNNET0=\", false, function () {\n  return [useMediaQuery];\n});\n\n_c4 = Default;\nvar PAGESIZE = 30;\nvar adsverImg = '/buy-car-ads.png';\nvar filterTypes = ['make', 'model'];\n\nvar UserCarOnSale = function UserCarOnSale(props) {\n  _s5();\n\n  var _useState = useState(false),\n      moreOptionModalVisible = _useState[0],\n      setMoreOptionModalVisible = _useState[1];\n\n  var _useState2 = useState({}),\n      profile = _useState2[0],\n      setProfile = _useState2[1];\n\n  var _useState3 = useState(false),\n      productLoading = _useState3[0],\n      setProductLoading = _useState3[1];\n\n  var _useState4 = useState('gridView'),\n      view = _useState4[0],\n      setView = _useState4[1];\n\n  var _useState5 = useState([]),\n      productList = _useState5[0],\n      setProductList = _useState5[1];\n\n  var _useState6 = useState({}),\n      filterGroup = _useState6[0],\n      setFilterGroup = _useState6[1];\n\n  var _useState7 = useState(false),\n      isDropDownOpen = _useState7[0],\n      setIsDropDownOpen = _useState7[1];\n\n  var _useState8 = useState({\n    sorting: {},\n    page: 1\n  }),\n      mainConfig = _useState8[0],\n      setMainConfig = _useState8[1];\n\n  var _useState9 = useState(0),\n      total = _useState9[0],\n      setTotal = _useState9[1];\n\n  var _useState10 = useState({}),\n      availableFilterOptions = _useState10[0],\n      setAvailableFilterOptions = _useState10[1];\n\n  useEffect(function () {\n    if (_.isPlainObject(props.data) && !_.isEmpty(props.data)) {\n      setProfile(props.data);\n    } else {\n      setProfile({});\n    }\n  }, [props.data]);\n  useEffect(function () {}, [availableFilterOptions]); // useEffect(() => {\n  //     // Bind the event listener\n  //     document.addEventListener(\"mousedown\", handleClickOutside);\n  //     return () => {\n  //         // Unbind the event listener on clean up\n  //         document.removeEventListener(\"mousedown\", handleClickOutside);\n  //     };\n  // }, [isDropDownOpen])\n\n  useEffect(function () {\n    if (_.isPlainObject(profile) && !_.isEmpty(profile)) {\n      if (_.get(mainConfig, ['page']) == 1) {\n        getData();\n        getAvailableOptions();\n      } else {\n        setMainConfig(_objectSpread(_objectSpread({}, mainConfig), {}, {\n          page: 1\n        }));\n      }\n    } else {\n      setProductList([]);\n    }\n  }, [filterGroup, profile]);\n  useEffect(function () {\n    getData();\n  }, [mainConfig]);\n\n  function scrollToCarOnSale() {\n    var elmnt = document.getElementById(\"user-car-on-sale-container\");\n    var offset = -100;\n    var elementPosition = _.get(elmnt.getBoundingClientRect(), ['top']) || 0;\n    var offsetPosition = elementPosition - offset;\n    window.scrollTo({\n      top: offsetPosition,\n      behavior: \"smooth\"\n    });\n  }\n\n  function pushParameterToUrl(data, config) {\n    var path = convertParameterToProductListUrl(data, config);\n\n    if (path != \"\".concat(props.location.pathname).concat(props.location.search)) {\n      props.loading(true);\n      props.router.replace(path);\n    }\n  } // function handleClickOutside(event) {\n  //     if ((!containerRef.current || !containerRef.current.contains(event.target))) {\n  //         setMoreOptionModalVisible(false)\n  //     }\n  // }\n\n\n  function getData() {\n    //     let query = queryString.parse(props.location.search);\n    //   if (!query) {\n    //     query = {};\n    //   }\n    //     let sorting = query.sorting ? JSON.parse(query.sorting) : { createdAt: -1 };\n    //     let config = {\n    //         page: query.page,\n    //         view: query.view,\n    //         sorting: sorting\n    //       }\n    if (_.get(profile, ['_id'])) {\n      var sorting = _.cloneDeep(objectRemoveEmptyValue(mainConfig.sorting));\n\n      if (_.isPlainObject(_.pick(sorting, ['searchPrice', 'mileageFilter', 'carspec.year'])) && !_.isEmpty(_.pick(sorting, ['searchPrice', 'mileageFilter', 'carspec.year']))) {} else {\n        sorting = {};\n      }\n\n      props.loading(true);\n      var match = {\n        $match: _objectSpread(_objectSpread({}, objectRemoveEmptyValue(filterGroup)), {}, {\n          'createdBy': _.get(profile, ['_id'])\n        })\n      };\n      axios.get(\"\".concat(client.io.io.uri, \"carAdsFilterV3\"), {\n        params: {\n          match: match,\n          sorting: sorting,\n          limit: PAGESIZE,\n          skip: (mainConfig.page - 1) * PAGESIZE\n        }\n      }).then(function (res) {\n        props.loading(false);\n\n        if (notEmptyLength(res.data.data)) {\n          setProductList(res.data.data);\n          setTotal(res.data.total);\n        } else {\n          setProductList([]);\n          setTotal(0);\n        }\n      })[\"catch\"](function (err) {\n        props.loading(false);\n        message.error(err.message);\n      });\n    } // if (!filterGroup.state) {\n    //      setMainConfig(config);\n    //     return null;\n    //   }\n\n  }\n\n  function getAvailableOptions() {\n    if (_.get(profile, ['_id'])) {\n      var promises = [];\n      var match = {\n        $match: _objectSpread(_objectSpread({}, objectRemoveEmptyValue(filterGroup)), {}, {\n          'createdBy': _.get(profile, ['_id'])\n        })\n      };\n\n      _.forEach(filterTypes, function (filterType) {\n        promises.push(axios.get(\"\".concat(client.io.io.uri, \"brandFilterTotalV3\"), {\n          params: {\n            filterType: filterType,\n            match: match\n          },\n          headers: {\n            'Authorization': client.settings.storage.storage.storage['feathers-jwt']\n          }\n        }));\n      });\n\n      Promise.all(promises).then(function (responses) {\n        if (_.isArray(responses) && !_.isEmpty(responses)) {\n          var options = {};\n\n          _.forEach(responses, function (response, index) {\n            options[\"\".concat(filterTypes[index], \"List\")] = response.data.uniqueInfo[\"\".concat(filterTypes[index], \"List\")];\n          });\n\n          setAvailableFilterOptions(options);\n        }\n      })[\"catch\"](function (err) {// message.error(err.message);\n      });\n    }\n  }\n\n  var _renderGridView = function _renderGridView() {\n    return __jsx(ProductList, {\n      data: productList\n    });\n  };\n\n  var _renderCarOnSale = function _renderCarOnSale() {\n    return __jsx(\"div\", {\n      style: {\n        minHeight: 800\n      }\n    }, __jsx(\"span\", {\n      className: \"flex-items-align-center flex-justify-space-around\"\n    }, __jsx(\"span\", {\n      className: \"flex-justify-center flex-items-align-center margin-x-xs\"\n    }, __jsx(\"span\", {\n      style: {\n        fontSize: '12px'\n      },\n      className: \"d-inline-block \"\n    }, \"360\\xB0 View:\"), __jsx(\"span\", {\n      className: \"d-inline-block margin-left-xs\"\n    }, __jsx(Switch, {\n      checked: _.get(filterGroup, ['car360View']),\n      onChange: function onChange(checked) {\n        scrollToCarOnSale();\n        setFilterGroup(_objectSpread(_objectSpread({}, filterGroup), {}, {\n          car360View: checked\n        }));\n      }\n    }))), __jsx(\"span\", {\n      className: \"flex-justify-center flex-items-align-center margin-x-xs\"\n    }, __jsx(\"span\", {\n      style: {\n        fontSize: '12px'\n      },\n      className: \"d-inline-block\"\n    }, \"Ready Stock:\"), __jsx(\"span\", {\n      className: \"d-inline-block margin-left-xs\"\n    }, __jsx(Switch, {\n      checked: filterGroup.readyStock,\n      onChange: function onChange(checked) {\n        props.loading(true);\n        setFilterGroup(_objectSpread(_objectSpread({}, filterGroup), {}, {\n          readyStock: checked ? 'yes' : null\n        }));\n      }\n    }))), __jsx(\"span\", {\n      className: \"flex-justify-center flex-items-align-center margin-x-xs\"\n    }, __jsx(\"span\", {\n      style: {\n        fontSize: '12px'\n      },\n      className: \"d-inline-block\"\n    }, \"Reg Card:\"), __jsx(\"span\", {\n      className: \"margin-left-xs\"\n    }, __jsx(Switch, {\n      checked: _.get(filterGroup, ['registrationUrl']),\n      onChange: function onChange(checked) {\n        scrollToCarOnSale();\n        setFilterGroup(_objectSpread(_objectSpread({}, filterGroup), {}, {\n          registrationUrl: checked\n        }));\n      }\n    })))), __jsx(\"span\", {\n      className: \"flex-items-align-center flex-justify-space-around margin-top-sm margin-x-xs\"\n    }, __jsx(\"span\", {\n      className: \"flex-justify-center flex-items-align-center margin-x-xs\"\n    }, __jsx(Select, {\n      allowClear: true,\n      value: _.get(filterGroup, ['make']),\n      style: {\n        width: 120\n      },\n      dropdownMatchSelectWidth: false,\n      placeholder: \"Brand\",\n      className: \"padding-right-sm\",\n      onChange: function onChange(value) {\n        setFilterGroup(_objectSpread(_objectSpread({}, filterGroup), {}, {\n          make: _.toLower(value) || undefined,\n          model: undefined\n        }));\n      }\n    }, _.map(_.isArray(_.get(availableFilterOptions, ['makeList'])) && !_.isEmpty(_.get(availableFilterOptions, ['makeList'])) ? _.sortBy(_.get(availableFilterOptions, ['makeList']), 'value') : [], function (item) {\n      return __jsx(Select.Option, {\n        value: _.get(item, ['value']),\n        className: \"capitalize\"\n      }, _.get(getCarBrand(_.get(item, ['value'])), ['value']) || _.get(item, ['value']) || '', \" (\", formatNumber(_.get(item, ['count']), 'auto', true, 0, true) || 0, \")\");\n    }))), __jsx(\"span\", {\n      className: \"flex-justify-center flex-items-align-center margin-x-xs\"\n    }, __jsx(Select, {\n      allowClear: true,\n      value: _.get(filterGroup, ['model']),\n      style: {\n        width: 120\n      },\n      dropdownMatchSelectWidth: false,\n      placeholder: \"Model\",\n      className: \"padding-right-sm\",\n      onChange: function onChange(value) {\n        setFilterGroup(_objectSpread(_objectSpread({}, filterGroup), {}, {\n          model: _.toLower(value) || undefined\n        }));\n      },\n      disabled: !filterGroup.make\n    }, _.map(_.isArray(_.get(availableFilterOptions, ['modelList'])) && !_.isEmpty(_.get(availableFilterOptions, ['modelList'])) ? _.sortBy(_.get(availableFilterOptions, ['modelList']), 'value') : [], function (item) {\n      return __jsx(Select.Option, {\n        value: _.get(item, ['value']),\n        className: \"capitalize\"\n      }, _.get(item, ['value']) || '', \" (\", formatNumber(_.get(item, ['count']), 'auto', true, 0, true) || 0, \")\");\n    }))), __jsx(\"span\", {\n      className: \"flex-justify-center flex-items-align-center margin-x-xs\"\n    }, __jsx(Select, {\n      defaultValue: \"\",\n      style: {\n        width: 120\n      },\n      dropdownMatchSelectWidth: false,\n      dropdownStyle: {\n        alignContent: 'left'\n      },\n      onChange: function onChange(e) {\n        var sorting = {};\n        var str = e.split(':') || [];\n        sorting[str[0]] = parseInt(str[1]);\n        setMainConfig(_objectSpread(_objectSpread({}, mainConfig), {}, {\n          sorting: sorting,\n          page: 1\n        }));\n      },\n      value: _.isPlainObject(mainConfig.sorting) && !_.isEmpty(objectRemoveEmptyValue(mainConfig.sorting)) ? \"\".concat(_.get(Object.entries(mainConfig.sorting), [0, 0]), \":\").concat(mainConfig.sorting[_.get(Object.entries(mainConfig.sorting), [0, 0])]) : ''\n    }, __jsx(Select.Option, {\n      value: \"\"\n    }, \"Best Value\"), __jsx(Select.Option, {\n      value: \"price:1\"\n    }, \"Price (Low to High)\"), __jsx(Select.Option, {\n      value: \"price:-1\"\n    }, \"Price (High to Low)\"), __jsx(Select.Option, {\n      value: \"carspec.year:-1\"\n    }, \"Year (New to Old)\"), __jsx(Select.Option, {\n      value: \"carspec.year:1\"\n    }, \"Year (Old to New)\"), __jsx(Select.Option, {\n      value: \"mileage:1\"\n    }, \"Mileage (Low to High)\"), __jsx(Select.Option, {\n      value: \"mileage:-1\"\n    }, \"Mileage (High to Low)\")))), __jsx(Col, {\n      span: 24,\n      className: \"margin-top-lg\"\n    }, __jsx(Row, {\n      gutter: [10, 10]\n    }, _renderGridView())));\n  };\n\n  return __jsx(Row, {\n    type: \"flex\",\n    align: \"start\",\n    justify: \"center\",\n    gutter: [20, 10]\n  }, __jsx(Col, {\n    xs: {\n      order: 1,\n      span: 24\n    },\n    sm: {\n      order: 1,\n      span: 24\n    },\n    md: {\n      order: 1,\n      span: 24\n    },\n    lg: {\n      order: 1,\n      span: 24\n    },\n    xl: {\n      order: 1,\n      span: 24\n    }\n  }, __jsx(\"div\", {\n    id: \"user-car-on-sale-container\",\n    style: {\n      minHeight: \"1000px\",\n      padding: '0px'\n    }\n  }, _renderCarOnSale()), __jsx(Row, {\n    gutter: [10, 10]\n  }, __jsx(Col, {\n    className: \"margin-md\",\n    style: {\n      textAlign: 'center'\n    },\n    span: 24\n  }, __jsx(Pagination, {\n    current: mainConfig.page,\n    defaultCurrent: 1,\n    pageSize: PAGESIZE,\n    onChange: function onChange(page) {\n      scrollToCarOnSale();\n      setMainConfig(_objectSpread(_objectSpread({}, mainConfig), {}, {\n        page: page\n      }));\n    },\n    total: total\n  })))));\n};\n\n_s5(UserCarOnSale, \"MSjEThJLxBsOw6U8KwlDez+UztE=\");\n\n_c5 = UserCarOnSale;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    sellCars: state.sellCars,\n    productsList: state.productsList,\n    app: state.app,\n    user: state.user,\n    sellerProfile: state.sellerProfile\n  };\n};\n\nvar mapDispatchToProps = {\n  loading: loading,\n  updateActiveMenu: updateActiveMenu,\n  fetchProductsList: fetchProductsList,\n  updateActiveIdProductList: updateActiveIdProductList,\n  filterCarBrandMode: filterCarBrandMode,\n  filterCarModelMode: filterCarModelMode,\n  filterCarSearchKeywords: filterCarSearchKeywords,\n  quickSearchProductsList: quickSearchProductsList,\n  setApplyYear: setApplyYear,\n  setApplyPrice: setApplyPrice,\n  setApplyMileage: setApplyMileage,\n  filterCarBrands: filterCarBrands,\n  filterCarModels: filterCarModels,\n  filterColors: filterColors,\n  filterBodyTypes: filterBodyTypes,\n  filterDrivenWheels: filterDrivenWheels,\n  filterFuelTypes: filterFuelTypes,\n  filterStates: filterStates\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Form.create()(withRouter(UserCarOnSale)));\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"Desktop\");\n$RefreshReg$(_c2, \"Tablet\");\n$RefreshReg$(_c3, \"Mobile\");\n$RefreshReg$(_c4, \"Default\");\n$RefreshReg$(_c5, \"UserCarOnSale\");","map":{"version":3,"sources":["/Users/faraheen/ccar-cms-next-mobile/components/profile/UserCarOnSale.jsx"],"names":["AppstoreOutlined","BarsOutlined","Button","Col","Divider","Empty","Form","Icon","message","Pagination","Radio","Row","Select","Switch","Tooltip","axios","_","React","useEffect","useState","connect","useMediaQuery","client","getCarBrand","filterBodyTypes","filterCarBrandMode","filterCarBrands","filterCarModelMode","filterCarModels","filterCarSearchKeywords","filterColors","filterDrivenWheels","filterFuelTypes","filterStates","loading","quickSearchProductsList","setApplyMileage","setApplyPrice","setApplyYear","updateActiveMenu","convertParameterToProductListUrl","formatNumber","notEmptyLength","objectRemoveEmptyValue","GridProductList","ProductList","fetchProductsList","updateActiveIdProductList","withRouter","Desktop","children","isDesktop","minWidth","Tablet","isTablet","maxWidth","Mobile","isMobile","Default","isNotMobile","PAGESIZE","adsverImg","filterTypes","UserCarOnSale","props","moreOptionModalVisible","setMoreOptionModalVisible","profile","setProfile","productLoading","setProductLoading","view","setView","productList","setProductList","filterGroup","setFilterGroup","isDropDownOpen","setIsDropDownOpen","sorting","page","mainConfig","setMainConfig","total","setTotal","availableFilterOptions","setAvailableFilterOptions","isPlainObject","data","isEmpty","get","getData","getAvailableOptions","scrollToCarOnSale","elmnt","document","getElementById","offset","elementPosition","getBoundingClientRect","offsetPosition","window","scrollTo","top","behavior","pushParameterToUrl","config","path","location","pathname","search","router","replace","cloneDeep","pick","match","$match","io","uri","params","limit","skip","then","res","err","error","promises","forEach","filterType","push","headers","settings","storage","Promise","all","responses","isArray","options","response","index","uniqueInfo","_renderGridView","_renderCarOnSale","minHeight","fontSize","checked","car360View","readyStock","registrationUrl","width","value","make","toLower","undefined","model","map","sortBy","item","alignContent","e","str","split","parseInt","Object","entries","order","span","padding","textAlign","mapStateToProps","state","sellCars","productsList","app","user","sellerProfile","mapDispatchToProps","create"],"mappings":"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","sourcesContent":["import { AppstoreOutlined, BarsOutlined } from '@ant-design/icons';\nimport { Button, Col, Divider, Empty, Form, Icon, message, Pagination, Radio, Row, Select, Switch, Tooltip } from 'antd';\nimport axios from 'axios';\nimport _ from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { useMediaQuery } from 'react-responsive';\nimport client from '../../feathers';\nimport { getCarBrand } from '../../params/carBrandsList';\nimport {\n    filterBodyTypes, filterCarBrandMode, filterCarBrands, filterCarModelMode, filterCarModels, filterCarSearchKeywords, filterColors,\n    filterDrivenWheels,\n    filterFuelTypes,\n    filterStates, loading,\n    quickSearchProductsList,\n    setApplyMileage, setApplyPrice, setApplyYear, updateActiveMenu\n} from '../../redux/actions/app-actions';\nimport { convertParameterToProductListUrl, formatNumber, notEmptyLength, objectRemoveEmptyValue } from '../../common-function';\nimport GridProductList from '../product-list/grid-product-list';\nimport ProductList from '../product-list/ProductList';\nimport { fetchProductsList, updateActiveIdProductList  } from '../../redux/actions/productsList-actions';\nimport { withRouter } from 'next/router';\n\n\n\nconst Desktop = ({ children }) => {\n    const isDesktop = useMediaQuery({ minWidth: 992 })\n    return isDesktop ? children : null\n}\nconst Tablet = ({ children }) => {\n    const isTablet = useMediaQuery({ minWidth: 768, maxWidth: 991 })\n    return isTablet ? children : null\n}\nconst Mobile = ({ children }) => {\n    const isMobile = useMediaQuery({ maxWidth: 767 })\n    return isMobile ? children : null\n}\nconst Default = ({ children }) => {\n    const isNotMobile = useMediaQuery({ minWidth: 768 })\n    return isNotMobile ? children : null\n}\n\nconst PAGESIZE = 30;\nconst adsverImg = '/buy-car-ads.png'\n\nconst filterTypes = ['make', 'model'];\n\nconst UserCarOnSale = (props) => {\n\n    const [moreOptionModalVisible, setMoreOptionModalVisible] = useState(false)\n    const [profile, setProfile] = useState({});\n    const [productLoading, setProductLoading] = useState(false)\n    const [view, setView] = useState('gridView')\n    const [productList, setProductList] = useState([])\n    const [filterGroup, setFilterGroup] = useState({})\n    const [isDropDownOpen, setIsDropDownOpen] = useState(false)\n    const [mainConfig, setMainConfig] = useState({\n        sorting: {},\n        page: 1,\n    })\n    const [total, setTotal] = useState(0)\n    const [availableFilterOptions, setAvailableFilterOptions] = useState({});\n\n\n\n    useEffect(() => {\n        if (_.isPlainObject(props.data) && !_.isEmpty(props.data)) {\n            setProfile(props.data);\n        } else {\n            setProfile({});\n        }\n    }, [props.data])\n\n\n    useEffect(() => {\n\n    }, [availableFilterOptions])\n\n    // useEffect(() => {\n\n    //     // Bind the event listener\n    //     document.addEventListener(\"mousedown\", handleClickOutside);\n    //     return () => {\n    //         // Unbind the event listener on clean up\n    //         document.removeEventListener(\"mousedown\", handleClickOutside);\n    //     };\n    // }, [isDropDownOpen])\n\n    useEffect(() => {\n        if (_.isPlainObject(profile) && !_.isEmpty(profile)) {\n            if (_.get(mainConfig, ['page']) == 1) {\n                getData();\n                getAvailableOptions();\n            } else {\n                setMainConfig({ ...mainConfig, page: 1 })\n            }\n        } else {\n            setProductList([]);\n        }\n    }, [filterGroup, profile])\n\n    useEffect(() => {\n        getData();\n    }, [mainConfig])\n\n    function scrollToCarOnSale() {\n        var elmnt = document.getElementById(\"user-car-on-sale-container\");\n        var offset = -100;\n        var elementPosition = _.get(elmnt.getBoundingClientRect(), ['top']) || 0;\n        var offsetPosition = elementPosition - offset;\n        window.scrollTo({\n            top: offsetPosition,\n            behavior: \"smooth\"\n        });\n    }\n\n    function pushParameterToUrl(data, config) {\n\n        let path = convertParameterToProductListUrl(data, config)\n        if (path != `${props.location.pathname}${props.location.search}`) {\n            props.loading(true);\n            props.router.replace(path)\n        }\n\n    }\n\n    // function handleClickOutside(event) {\n\n    //     if ((!containerRef.current || !containerRef.current.contains(event.target))) {\n    //         setMoreOptionModalVisible(false)\n    //     }\n    // }\n\n    function getData() {\n        //     let query = queryString.parse(props.location.search);\n        //   if (!query) {\n        //     query = {};\n        //   }\n        //     let sorting = query.sorting ? JSON.parse(query.sorting) : { createdAt: -1 };\n        //     let config = {\n        //         page: query.page,\n        //         view: query.view,\n        //         sorting: sorting\n        //       }\n        if (_.get(profile, ['_id'])) {\n            let sorting = _.cloneDeep(objectRemoveEmptyValue(mainConfig.sorting));\n            if (_.isPlainObject(_.pick(sorting, ['searchPrice', 'mileageFilter', 'carspec.year'])) && !_.isEmpty(_.pick(sorting, ['searchPrice', 'mileageFilter', 'carspec.year']))) {\n            } else {\n                sorting = {}\n            }\n            props.loading(true);\n            let match = { $match: { ...objectRemoveEmptyValue(filterGroup), 'createdBy': _.get(profile, ['_id']) } }\n            axios.get(`${client.io.io.uri}carAdsFilterV3`,\n                {\n                    params: {\n                        match,\n                        sorting: sorting,\n                        limit: PAGESIZE,\n                        skip: (mainConfig.page - 1) * PAGESIZE,\n                    }\n                }\n            ).then((res) => {\n                props.loading(false);\n                if (notEmptyLength(res.data.data)) {\n                    setProductList(res.data.data)\n                    setTotal(res.data.total);\n                } else {\n                    setProductList([])\n                    setTotal(0);\n                }\n            })\n                .catch((err) => {\n                    props.loading(false);\n                    message.error(err.message);\n                })\n        }\n\n        // if (!filterGroup.state) {\n        //      setMainConfig(config);\n        //     return null;\n        //   }\n\n    }\n\n    function getAvailableOptions() {\n        if (_.get(profile, ['_id'])) {\n            let promises = [];\n            let match = { $match: { ...objectRemoveEmptyValue(filterGroup), 'createdBy': _.get(profile, ['_id']) } }\n            _.forEach(filterTypes, function (filterType) {\n                promises.push(\n                    axios.get(`${client.io.io.uri}brandFilterTotalV3`, {\n                        params: { filterType: filterType, match },\n                        headers: { 'Authorization': client.settings.storage.storage.storage['feathers-jwt'] }\n                    })\n                )\n            })\n\n            Promise.all(promises).then((responses) => {\n                if (_.isArray(responses) && !_.isEmpty((responses))) {\n                    let options = {}\n                    _.forEach(responses, function (response, index) {\n                        options[`${filterTypes[index]}List`] = response.data.uniqueInfo[`${filterTypes[index]}List`];\n                    })\n\n\n                    setAvailableFilterOptions(options)\n                }\n            }).catch((err) => {\n                // message.error(err.message);\n            })\n        }\n\n    }\n\n    const _renderGridView = () => {\n        return (\n            <ProductList data={productList} />\n        )\n    }\n\n    const _renderCarOnSale = () => {\n        return (\n            <div style={{ minHeight: 800 }}>\n                <span className=\"flex-items-align-center flex-justify-space-around\">\n                    <span className='flex-justify-center flex-items-align-center margin-x-xs'>\n                        <span style={{fontSize:'12px'}} className='d-inline-block '>\n                            360&deg; View:\n                        </span>\n                        <span className=\"d-inline-block margin-left-xs\">\n                            <Switch checked={_.get(filterGroup, ['car360View'])} onChange={(checked) => { scrollToCarOnSale(); setFilterGroup({ ...filterGroup, car360View: checked }) }} />\n                        </span>\n                    </span>\n\n                    <span className='flex-justify-center flex-items-align-center margin-x-xs'>\n                        <span style={{fontSize:'12px'}} className=\"d-inline-block\">\n                            Ready Stock:\n                        </span>\n                        <span className=\"d-inline-block margin-left-xs\">\n                            <Switch checked={filterGroup.readyStock} onChange={(checked) => { props.loading(true); setFilterGroup({ ...filterGroup, readyStock: checked ? 'yes' : null }); }} />\n                        </span>\n                    </span>\n\n                    <span className='flex-justify-center flex-items-align-center margin-x-xs'>\n                        <span style={{fontSize:'12px'}} className=\"d-inline-block\">\n                            Reg Card:\n                        </span>\n                        <span className=\"margin-left-xs\"> \n                            <Switch checked={_.get(filterGroup, ['registrationUrl'])} onChange={(checked) => { scrollToCarOnSale(); setFilterGroup({ ...filterGroup, registrationUrl: checked }) }} />\n                        </span>\n                    </span>\n                </span>\n\n                <span className=\"flex-items-align-center flex-justify-space-around margin-top-sm margin-x-xs\">\n                    <span className='flex-justify-center flex-items-align-center margin-x-xs'>\n                        <Select allowClear value={_.get(filterGroup, ['make'])}\n                            style={{ width: 120 }}\n                            dropdownMatchSelectWidth={false} placeholder=\"Brand\"\n                            className=\"padding-right-sm\"\n                            onChange={(value) => {\n                                setFilterGroup({ ...filterGroup, make: _.toLower(value) || undefined, model: undefined })\n                                }}\n                            >\n                            {\n                                _.map(_.isArray(_.get(availableFilterOptions, ['makeList'])) && !_.isEmpty(_.get(availableFilterOptions, ['makeList'])) ? _.sortBy(_.get(availableFilterOptions, ['makeList']), 'value') : [], function (item) {\n                                    return (\n                                        <Select.Option value={_.get(item, ['value'])} className=\"capitalize\">\n                                            {_.get(getCarBrand(_.get(item, ['value'])), ['value']) || _.get(item, ['value']) || ''} ({formatNumber(_.get(item, ['count']), 'auto', true, 0, true) || 0})\n                                        </Select.Option>\n                                        )\n                                    })\n                                }\n                        </Select>\n                    </span>\n\n                    <span className='flex-justify-center flex-items-align-center margin-x-xs'>\n                        <Select allowClear value={_.get(filterGroup, ['model'])}\n                            style={{ width: 120 }}\n                            dropdownMatchSelectWidth={false} placeholder=\"Model\"\n                            className=\"padding-right-sm\"\n                            onChange={(value) => {\n                                setFilterGroup({ ...filterGroup, model: _.toLower(value) || undefined })\n                            }}\n                            disabled={!filterGroup.make}\n                            >\n                            {\n                                _.map(_.isArray(_.get(availableFilterOptions, ['modelList'])) && !_.isEmpty(_.get(availableFilterOptions, ['modelList'])) ? _.sortBy(_.get(availableFilterOptions, ['modelList']), 'value') : [], function (item) {\n                                    return (\n                                        <Select.Option value={_.get(item, ['value'])} className=\"capitalize\">\n                                            {_.get(item, ['value']) || ''} ({formatNumber(_.get(item, ['count']), 'auto', true, 0, true) || 0})\n                                        </Select.Option>\n                                        )\n                                    })\n                                }\n                        </Select>\n                    </span>\n\n                    <span className='flex-justify-center flex-items-align-center margin-x-xs'>\n                    <Select defaultValue=\"\" style={{ width: 120 }}\n                                dropdownMatchSelectWidth={false}\n                                dropdownStyle={{alignContent:'left'}}\n                                onChange={(e) => {\n                                    let sorting = {};\n                                    let str = e.split(':') || [];\n                                    sorting[str[0]] = parseInt(str[1]);\n                                    setMainConfig({ ...mainConfig, sorting: sorting, page: 1 })\n                                }}\n                                value={\n                                    _.isPlainObject(mainConfig.sorting) && !_.isEmpty(objectRemoveEmptyValue(mainConfig.sorting)) ?\n                                        `${_.get(Object.entries(mainConfig.sorting), [0, 0])}:${mainConfig.sorting[_.get(Object.entries(mainConfig.sorting), [0, 0])]}`\n                                        :\n                                        ''}\n                            >\n                                <Select.Option value=\"\">Best Value</Select.Option>\n                                <Select.Option value=\"price:1\">Price (Low to High)</Select.Option>\n                                <Select.Option value=\"price:-1\">Price (High to Low)</Select.Option>\n                                <Select.Option value=\"carspec.year:-1\">Year (New to Old)</Select.Option>\n                                <Select.Option value=\"carspec.year:1\">Year (Old to New)</Select.Option>\n                                <Select.Option value=\"mileage:1\">Mileage (Low to High)</Select.Option>\n                                <Select.Option value=\"mileage:-1\">Mileage (High to Low)</Select.Option>\n                            </Select>\n                    </span>\n                </span>\n\n                <Col span={24} className=\"margin-top-lg\">\n                    <Row gutter={[10, 10]}>\n                            {_renderGridView()}\n                    </Row>\n                </Col>\n            </div>\n        )\n    }\n\n    return (\n        <Row type=\"flex\" align=\"start\" justify=\"center\" gutter={[20, 10]}>\n            <Col xs={{ order: 1, span: 24 }} sm={{ order: 1, span: 24 }} md={{ order: 1, span: 24 }} lg={{ order: 1, span: 24 }} xl={{ order: 1, span: 24 }} >\n                <div id=\"user-car-on-sale-container\" style={{ minHeight: \"1000px\", padding: '0px' }}>\n                    {_renderCarOnSale()}\n                </div>\n                <Row gutter={[10, 10]}>\n                    <Col className=\"margin-md\" style={{ textAlign: 'center' }} span={24}>\n                        <Pagination current={mainConfig.page} defaultCurrent={1} pageSize={PAGESIZE} onChange={(page) => { scrollToCarOnSale(); setMainConfig({ ...mainConfig, page: page }) }} total={total} />\n                    </Col>\n                </Row>\n            </Col>\n        </Row>\n    );\n}\n\n\nconst mapStateToProps = state => ({\n    sellCars: state.sellCars,\n    productsList: state.productsList,\n    app: state.app,\n    user: state.user,\n    sellerProfile: state.sellerProfile,\n});\n\nconst mapDispatchToProps = {\n    loading: loading,\n    updateActiveMenu: updateActiveMenu,\n    fetchProductsList: fetchProductsList,\n    updateActiveIdProductList: updateActiveIdProductList,\n    filterCarBrandMode: filterCarBrandMode,\n    filterCarModelMode: filterCarModelMode,\n    filterCarSearchKeywords: filterCarSearchKeywords,\n    quickSearchProductsList: quickSearchProductsList,\n    setApplyYear: setApplyYear,\n    setApplyPrice: setApplyPrice,\n    setApplyMileage: setApplyMileage,\n\n    filterCarBrands: filterCarBrands,\n    filterCarModels: filterCarModels,\n    filterColors: filterColors,\n    filterBodyTypes: filterBodyTypes,\n    filterDrivenWheels: filterDrivenWheels,\n    filterFuelTypes: filterFuelTypes,\n    filterStates: filterStates\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Form.create()(withRouter(UserCarOnSale)));"]},"metadata":{},"sourceType":"module"}