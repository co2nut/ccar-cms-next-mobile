{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { AppstoreOutlined, BarsOutlined } from '@ant-design/icons';\nimport { Button, Col, Divider, Empty, Form, Icon, message, Pagination, Radio, Row, Select, Switch, Tooltip } from 'antd';\nimport axios from 'axios';\nimport _ from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { useMediaQuery } from 'react-responsive';\nimport client from '../../feathers';\nimport { getCarBrand } from '../../params/carBrandsList';\nimport { filterBodyTypes, filterCarBrandMode, filterCarBrands, filterCarModelMode, filterCarModels, filterCarSearchKeywords, filterColors, filterDrivenWheels, filterFuelTypes, filterStates, loading, quickSearchProductsList, setApplyMileage, setApplyPrice, setApplyYear, updateActiveMenu } from '../../redux/actions/app-actions';\nimport { convertParameterToProductListUrl, formatNumber, notEmptyLength, objectRemoveEmptyValue } from '../../common-function';\nimport GridProductList from '../product-list/grid-product-list';\nimport ProductList from '../product-list/ProductList';\nimport { fetchProductsList, updateActiveIdProductList } from '../../redux/actions/productsList-actions';\nimport { withRouter } from 'next/router';\n\nconst Desktop = ({\n  children\n}) => {\n  const isDesktop = useMediaQuery({\n    minWidth: 992\n  });\n  return isDesktop ? children : null;\n};\n\nconst Tablet = ({\n  children\n}) => {\n  const isTablet = useMediaQuery({\n    minWidth: 768,\n    maxWidth: 991\n  });\n  return isTablet ? children : null;\n};\n\nconst Mobile = ({\n  children\n}) => {\n  const isMobile = useMediaQuery({\n    maxWidth: 767\n  });\n  return isMobile ? children : null;\n};\n\nconst Default = ({\n  children\n}) => {\n  const isNotMobile = useMediaQuery({\n    minWidth: 768\n  });\n  return isNotMobile ? children : null;\n};\n\nconst PAGESIZE = 30;\nconst adsverImg = '/buy-car-ads.png';\nconst filterTypes = ['make', 'model'];\n\nconst UserCarOnSale = props => {\n  const {\n    0: moreOptionModalVisible,\n    1: setMoreOptionModalVisible\n  } = useState(false);\n  const {\n    0: profile,\n    1: setProfile\n  } = useState({});\n  const {\n    0: productLoading,\n    1: setProductLoading\n  } = useState(false);\n  const {\n    0: view,\n    1: setView\n  } = useState('gridView');\n  const {\n    0: productList,\n    1: setProductList\n  } = useState([]);\n  const {\n    0: filterGroup,\n    1: setFilterGroup\n  } = useState({});\n  const {\n    0: isDropDownOpen,\n    1: setIsDropDownOpen\n  } = useState(false);\n  const {\n    0: mainConfig,\n    1: setMainConfig\n  } = useState({\n    sorting: {},\n    page: 1\n  });\n  const {\n    0: total,\n    1: setTotal\n  } = useState(0);\n  const {\n    0: availableFilterOptions,\n    1: setAvailableFilterOptions\n  } = useState({});\n  useEffect(() => {\n    if (_.isPlainObject(props.data) && !_.isEmpty(props.data)) {\n      setProfile(props.data);\n    } else {\n      setProfile({});\n    }\n  }, [props.data]);\n  useEffect(() => {}, [availableFilterOptions]); // useEffect(() => {\n  //     // Bind the event listener\n  //     document.addEventListener(\"mousedown\", handleClickOutside);\n  //     return () => {\n  //         // Unbind the event listener on clean up\n  //         document.removeEventListener(\"mousedown\", handleClickOutside);\n  //     };\n  // }, [isDropDownOpen])\n\n  useEffect(() => {\n    if (_.isPlainObject(profile) && !_.isEmpty(profile)) {\n      if (_.get(mainConfig, ['page']) == 1) {\n        getData();\n        getAvailableOptions();\n      } else {\n        setMainConfig(_objectSpread(_objectSpread({}, mainConfig), {}, {\n          page: 1\n        }));\n      }\n    } else {\n      setProductList([]);\n    }\n  }, [filterGroup, profile]);\n  useEffect(() => {\n    getData();\n  }, [mainConfig]);\n\n  function scrollToCarOnSale() {\n    var elmnt = document.getElementById(\"user-car-on-sale-container\");\n    var offset = -100;\n    var elementPosition = _.get(elmnt.getBoundingClientRect(), ['top']) || 0;\n    var offsetPosition = elementPosition - offset;\n    window.scrollTo({\n      top: offsetPosition,\n      behavior: \"smooth\"\n    });\n  }\n\n  function pushParameterToUrl(data, config) {\n    let path = convertParameterToProductListUrl(data, config);\n\n    if (path != `${props.location.pathname}${props.location.search}`) {\n      props.loading(true);\n      props.router.replace(path);\n    }\n  } // function handleClickOutside(event) {\n  //     if ((!containerRef.current || !containerRef.current.contains(event.target))) {\n  //         setMoreOptionModalVisible(false)\n  //     }\n  // }\n\n\n  function getData() {\n    //     let query = queryString.parse(props.location.search);\n    //   if (!query) {\n    //     query = {};\n    //   }\n    //     let sorting = query.sorting ? JSON.parse(query.sorting) : { createdAt: -1 };\n    //     let config = {\n    //         page: query.page,\n    //         view: query.view,\n    //         sorting: sorting\n    //       }\n    if (_.get(profile, ['_id'])) {\n      let sorting = _.cloneDeep(objectRemoveEmptyValue(mainConfig.sorting));\n\n      if (_.isPlainObject(_.pick(sorting, ['searchPrice', 'mileageFilter', 'carspec.year'])) && !_.isEmpty(_.pick(sorting, ['searchPrice', 'mileageFilter', 'carspec.year']))) {} else {\n        sorting = {};\n      }\n\n      props.loading(true);\n      let match = {\n        $match: _objectSpread(_objectSpread({}, objectRemoveEmptyValue(filterGroup)), {}, {\n          'createdBy': _.get(profile, ['_id'])\n        })\n      };\n      axios.get(`${client.io.io.uri}carAdsFilterV3`, {\n        params: {\n          match,\n          sorting: sorting,\n          limit: PAGESIZE,\n          skip: (mainConfig.page - 1) * PAGESIZE\n        }\n      }).then(res => {\n        props.loading(false);\n\n        if (notEmptyLength(res.data.data)) {\n          setProductList(res.data.data);\n          setTotal(res.data.total);\n        } else {\n          setProductList([]);\n          setTotal(0);\n        }\n      }).catch(err => {\n        props.loading(false);\n        message.error(err.message);\n      });\n    } // if (!filterGroup.state) {\n    //      setMainConfig(config);\n    //     return null;\n    //   }\n\n  }\n\n  function getAvailableOptions() {\n    if (_.get(profile, ['_id'])) {\n      let promises = [];\n      let match = {\n        $match: _objectSpread(_objectSpread({}, objectRemoveEmptyValue(filterGroup)), {}, {\n          'createdBy': _.get(profile, ['_id'])\n        })\n      };\n\n      _.forEach(filterTypes, function (filterType) {\n        promises.push(axios.get(`${client.io.io.uri}brandFilterTotalV3`, {\n          params: {\n            filterType: filterType,\n            match\n          },\n          headers: {\n            'Authorization': client.settings.storage.storage.storage['feathers-jwt']\n          }\n        }));\n      });\n\n      Promise.all(promises).then(responses => {\n        if (_.isArray(responses) && !_.isEmpty(responses)) {\n          let options = {};\n\n          _.forEach(responses, function (response, index) {\n            options[`${filterTypes[index]}List`] = response.data.uniqueInfo[`${filterTypes[index]}List`];\n          });\n\n          setAvailableFilterOptions(options);\n        }\n      }).catch(err => {// message.error(err.message);\n      });\n    }\n  }\n\n  const _renderGridView = () => {\n    return __jsx(ProductList, {\n      data: productList\n    });\n  };\n\n  const _renderCarOnSale = () => {\n    return __jsx(\"div\", {\n      style: {\n        minHeight: 800\n      }\n    }, __jsx(\"span\", {\n      className: \"flex-items-align-center flex-justify-space-around\"\n    }, __jsx(\"span\", {\n      className: \"flex-justify-center flex-items-align-center margin-x-xs\"\n    }, __jsx(\"span\", {\n      style: {\n        fontSize: '12px'\n      },\n      className: \"d-inline-block \"\n    }, \"360\\xB0 View:\"), __jsx(\"span\", {\n      className: \"d-inline-block margin-left-xs\"\n    }, __jsx(Switch, {\n      checked: _.get(filterGroup, ['car360View']),\n      onChange: checked => {\n        scrollToCarOnSale();\n        setFilterGroup(_objectSpread(_objectSpread({}, filterGroup), {}, {\n          car360View: checked\n        }));\n      }\n    }))), __jsx(\"span\", {\n      className: \"flex-justify-center flex-items-align-center margin-x-xs\"\n    }, __jsx(\"span\", {\n      style: {\n        fontSize: '12px'\n      },\n      className: \"d-inline-block\"\n    }, \"Ready Stock:\"), __jsx(\"span\", {\n      className: \"d-inline-block margin-left-xs\"\n    }, __jsx(Switch, {\n      checked: filterGroup.readyStock,\n      onChange: checked => {\n        props.loading(true);\n        setFilterGroup(_objectSpread(_objectSpread({}, filterGroup), {}, {\n          readyStock: checked ? 'yes' : null\n        }));\n      }\n    }))), __jsx(\"span\", {\n      className: \"flex-justify-center flex-items-align-center margin-x-xs\"\n    }, __jsx(\"span\", {\n      style: {\n        fontSize: '12px'\n      },\n      className: \"d-inline-block\"\n    }, \"Reg Card:\"), __jsx(\"span\", {\n      className: \"margin-left-xs\"\n    }, __jsx(Switch, {\n      checked: _.get(filterGroup, ['registrationUrl']),\n      onChange: checked => {\n        scrollToCarOnSale();\n        setFilterGroup(_objectSpread(_objectSpread({}, filterGroup), {}, {\n          registrationUrl: checked\n        }));\n      }\n    })))), __jsx(\"span\", {\n      className: \"flex-items-align-center flex-justify-space-around margin-top-sm margin-x-xs\"\n    }, __jsx(\"span\", {\n      className: \"flex-justify-center flex-items-align-center margin-x-xs\"\n    }, __jsx(Select, {\n      allowClear: true,\n      value: _.get(filterGroup, ['make']),\n      style: {\n        width: 120\n      },\n      dropdownMatchSelectWidth: false,\n      placeholder: \"Brand\",\n      className: \"padding-right-sm\",\n      onChange: value => {\n        setFilterGroup(_objectSpread(_objectSpread({}, filterGroup), {}, {\n          make: _.toLower(value) || undefined,\n          model: undefined\n        }));\n      }\n    }, _.map(_.isArray(_.get(availableFilterOptions, ['makeList'])) && !_.isEmpty(_.get(availableFilterOptions, ['makeList'])) ? _.sortBy(_.get(availableFilterOptions, ['makeList']), 'value') : [], function (item) {\n      return __jsx(Select.Option, {\n        value: _.get(item, ['value']),\n        className: \"capitalize\"\n      }, _.get(getCarBrand(_.get(item, ['value'])), ['value']) || _.get(item, ['value']) || '', \" (\", formatNumber(_.get(item, ['count']), 'auto', true, 0, true) || 0, \")\");\n    }))), __jsx(\"span\", {\n      className: \"flex-justify-center flex-items-align-center margin-x-xs\"\n    }, __jsx(Select, {\n      allowClear: true,\n      value: _.get(filterGroup, ['model']),\n      style: {\n        width: 120\n      },\n      dropdownMatchSelectWidth: false,\n      placeholder: \"Model\",\n      className: \"padding-right-sm\",\n      onChange: value => {\n        setFilterGroup(_objectSpread(_objectSpread({}, filterGroup), {}, {\n          model: _.toLower(value) || undefined\n        }));\n      },\n      disabled: !filterGroup.make\n    }, _.map(_.isArray(_.get(availableFilterOptions, ['modelList'])) && !_.isEmpty(_.get(availableFilterOptions, ['modelList'])) ? _.sortBy(_.get(availableFilterOptions, ['modelList']), 'value') : [], function (item) {\n      return __jsx(Select.Option, {\n        value: _.get(item, ['value']),\n        className: \"capitalize\"\n      }, _.get(item, ['value']) || '', \" (\", formatNumber(_.get(item, ['count']), 'auto', true, 0, true) || 0, \")\");\n    }))), __jsx(\"span\", {\n      className: \"flex-justify-center flex-items-align-center margin-x-xs\"\n    }, __jsx(Select, {\n      defaultValue: \"\",\n      style: {\n        width: 120\n      },\n      dropdownMatchSelectWidth: false,\n      dropdownStyle: {\n        alignContent: 'left'\n      },\n      onChange: e => {\n        let sorting = {};\n        let str = e.split(':') || [];\n        sorting[str[0]] = parseInt(str[1]);\n        setMainConfig(_objectSpread(_objectSpread({}, mainConfig), {}, {\n          sorting: sorting,\n          page: 1\n        }));\n      },\n      value: _.isPlainObject(mainConfig.sorting) && !_.isEmpty(objectRemoveEmptyValue(mainConfig.sorting)) ? `${_.get(Object.entries(mainConfig.sorting), [0, 0])}:${mainConfig.sorting[_.get(Object.entries(mainConfig.sorting), [0, 0])]}` : ''\n    }, __jsx(Select.Option, {\n      value: \"\"\n    }, \"Best Value\"), __jsx(Select.Option, {\n      value: \"price:1\"\n    }, \"Price (Low to High)\"), __jsx(Select.Option, {\n      value: \"price:-1\"\n    }, \"Price (High to Low)\"), __jsx(Select.Option, {\n      value: \"carspec.year:-1\"\n    }, \"Year (New to Old)\"), __jsx(Select.Option, {\n      value: \"carspec.year:1\"\n    }, \"Year (Old to New)\"), __jsx(Select.Option, {\n      value: \"mileage:1\"\n    }, \"Mileage (Low to High)\"), __jsx(Select.Option, {\n      value: \"mileage:-1\"\n    }, \"Mileage (High to Low)\")))), __jsx(Col, {\n      span: 24,\n      className: \"margin-top-lg\"\n    }, __jsx(Row, {\n      gutter: [10, 10]\n    }, _renderGridView())));\n  };\n\n  return __jsx(Row, {\n    type: \"flex\",\n    align: \"start\",\n    justify: \"center\",\n    gutter: [20, 10]\n  }, __jsx(Col, {\n    xs: {\n      order: 1,\n      span: 24\n    },\n    sm: {\n      order: 1,\n      span: 24\n    },\n    md: {\n      order: 1,\n      span: 24\n    },\n    lg: {\n      order: 1,\n      span: 24\n    },\n    xl: {\n      order: 1,\n      span: 24\n    }\n  }, __jsx(\"div\", {\n    id: \"user-car-on-sale-container\",\n    style: {\n      minHeight: \"1000px\",\n      padding: '0px'\n    }\n  }, _renderCarOnSale()), __jsx(Row, {\n    gutter: [10, 10]\n  }, __jsx(Col, {\n    className: \"margin-md\",\n    style: {\n      textAlign: 'center'\n    },\n    span: 24\n  }, __jsx(Pagination, {\n    current: mainConfig.page,\n    defaultCurrent: 1,\n    pageSize: PAGESIZE,\n    onChange: page => {\n      scrollToCarOnSale();\n      setMainConfig(_objectSpread(_objectSpread({}, mainConfig), {}, {\n        page: page\n      }));\n    },\n    total: total\n  })))));\n};\n\nconst mapStateToProps = state => ({\n  sellCars: state.sellCars,\n  productsList: state.productsList,\n  app: state.app,\n  user: state.user,\n  sellerProfile: state.sellerProfile\n});\n\nconst mapDispatchToProps = {\n  loading: loading,\n  updateActiveMenu: updateActiveMenu,\n  fetchProductsList: fetchProductsList,\n  updateActiveIdProductList: updateActiveIdProductList,\n  filterCarBrandMode: filterCarBrandMode,\n  filterCarModelMode: filterCarModelMode,\n  filterCarSearchKeywords: filterCarSearchKeywords,\n  quickSearchProductsList: quickSearchProductsList,\n  setApplyYear: setApplyYear,\n  setApplyPrice: setApplyPrice,\n  setApplyMileage: setApplyMileage,\n  filterCarBrands: filterCarBrands,\n  filterCarModels: filterCarModels,\n  filterColors: filterColors,\n  filterBodyTypes: filterBodyTypes,\n  filterDrivenWheels: filterDrivenWheels,\n  filterFuelTypes: filterFuelTypes,\n  filterStates: filterStates\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Form.create()(withRouter(UserCarOnSale)));","map":{"version":3,"sources":["/Users/faraheen/ccar-cms-next-mobile/components/profile/UserCarOnSale.jsx"],"names":["AppstoreOutlined","BarsOutlined","Button","Col","Divider","Empty","Form","Icon","message","Pagination","Radio","Row","Select","Switch","Tooltip","axios","_","React","useEffect","useState","connect","useMediaQuery","client","getCarBrand","filterBodyTypes","filterCarBrandMode","filterCarBrands","filterCarModelMode","filterCarModels","filterCarSearchKeywords","filterColors","filterDrivenWheels","filterFuelTypes","filterStates","loading","quickSearchProductsList","setApplyMileage","setApplyPrice","setApplyYear","updateActiveMenu","convertParameterToProductListUrl","formatNumber","notEmptyLength","objectRemoveEmptyValue","GridProductList","ProductList","fetchProductsList","updateActiveIdProductList","withRouter","Desktop","children","isDesktop","minWidth","Tablet","isTablet","maxWidth","Mobile","isMobile","Default","isNotMobile","PAGESIZE","adsverImg","filterTypes","UserCarOnSale","props","moreOptionModalVisible","setMoreOptionModalVisible","profile","setProfile","productLoading","setProductLoading","view","setView","productList","setProductList","filterGroup","setFilterGroup","isDropDownOpen","setIsDropDownOpen","mainConfig","setMainConfig","sorting","page","total","setTotal","availableFilterOptions","setAvailableFilterOptions","isPlainObject","data","isEmpty","get","getData","getAvailableOptions","scrollToCarOnSale","elmnt","document","getElementById","offset","elementPosition","getBoundingClientRect","offsetPosition","window","scrollTo","top","behavior","pushParameterToUrl","config","path","location","pathname","search","router","replace","cloneDeep","pick","match","$match","io","uri","params","limit","skip","then","res","catch","err","error","promises","forEach","filterType","push","headers","settings","storage","Promise","all","responses","isArray","options","response","index","uniqueInfo","_renderGridView","_renderCarOnSale","minHeight","fontSize","checked","car360View","readyStock","registrationUrl","width","value","make","toLower","undefined","model","map","sortBy","item","alignContent","e","str","split","parseInt","Object","entries","order","span","padding","textAlign","mapStateToProps","state","sellCars","productsList","app","user","sellerProfile","mapDispatchToProps","create"],"mappings":"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","sourcesContent":["import { AppstoreOutlined, BarsOutlined } from '@ant-design/icons';\nimport { Button, Col, Divider, Empty, Form, Icon, message, Pagination, Radio, Row, Select, Switch, Tooltip } from 'antd';\nimport axios from 'axios';\nimport _ from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { useMediaQuery } from 'react-responsive';\nimport client from '../../feathers';\nimport { getCarBrand } from '../../params/carBrandsList';\nimport {\n    filterBodyTypes, filterCarBrandMode, filterCarBrands, filterCarModelMode, filterCarModels, filterCarSearchKeywords, filterColors,\n    filterDrivenWheels,\n    filterFuelTypes,\n    filterStates, loading,\n    quickSearchProductsList,\n    setApplyMileage, setApplyPrice, setApplyYear, updateActiveMenu\n} from '../../redux/actions/app-actions';\nimport { convertParameterToProductListUrl, formatNumber, notEmptyLength, objectRemoveEmptyValue } from '../../common-function';\nimport GridProductList from '../product-list/grid-product-list';\nimport ProductList from '../product-list/ProductList';\nimport { fetchProductsList, updateActiveIdProductList  } from '../../redux/actions/productsList-actions';\nimport { withRouter } from 'next/router';\n\n\n\nconst Desktop = ({ children }) => {\n    const isDesktop = useMediaQuery({ minWidth: 992 })\n    return isDesktop ? children : null\n}\nconst Tablet = ({ children }) => {\n    const isTablet = useMediaQuery({ minWidth: 768, maxWidth: 991 })\n    return isTablet ? children : null\n}\nconst Mobile = ({ children }) => {\n    const isMobile = useMediaQuery({ maxWidth: 767 })\n    return isMobile ? children : null\n}\nconst Default = ({ children }) => {\n    const isNotMobile = useMediaQuery({ minWidth: 768 })\n    return isNotMobile ? children : null\n}\n\nconst PAGESIZE = 30;\nconst adsverImg = '/buy-car-ads.png'\n\nconst filterTypes = ['make', 'model'];\n\nconst UserCarOnSale = (props) => {\n\n    const [moreOptionModalVisible, setMoreOptionModalVisible] = useState(false)\n    const [profile, setProfile] = useState({});\n    const [productLoading, setProductLoading] = useState(false)\n    const [view, setView] = useState('gridView')\n    const [productList, setProductList] = useState([])\n    const [filterGroup, setFilterGroup] = useState({})\n    const [isDropDownOpen, setIsDropDownOpen] = useState(false)\n    const [mainConfig, setMainConfig] = useState({\n        sorting: {},\n        page: 1,\n    })\n    const [total, setTotal] = useState(0)\n    const [availableFilterOptions, setAvailableFilterOptions] = useState({});\n\n\n\n    useEffect(() => {\n        if (_.isPlainObject(props.data) && !_.isEmpty(props.data)) {\n            setProfile(props.data);\n        } else {\n            setProfile({});\n        }\n    }, [props.data])\n\n\n    useEffect(() => {\n\n    }, [availableFilterOptions])\n\n    // useEffect(() => {\n\n    //     // Bind the event listener\n    //     document.addEventListener(\"mousedown\", handleClickOutside);\n    //     return () => {\n    //         // Unbind the event listener on clean up\n    //         document.removeEventListener(\"mousedown\", handleClickOutside);\n    //     };\n    // }, [isDropDownOpen])\n\n    useEffect(() => {\n        if (_.isPlainObject(profile) && !_.isEmpty(profile)) {\n            if (_.get(mainConfig, ['page']) == 1) {\n                getData();\n                getAvailableOptions();\n            } else {\n                setMainConfig({ ...mainConfig, page: 1 })\n            }\n        } else {\n            setProductList([]);\n        }\n    }, [filterGroup, profile])\n\n    useEffect(() => {\n        getData();\n    }, [mainConfig])\n\n    function scrollToCarOnSale() {\n        var elmnt = document.getElementById(\"user-car-on-sale-container\");\n        var offset = -100;\n        var elementPosition = _.get(elmnt.getBoundingClientRect(), ['top']) || 0;\n        var offsetPosition = elementPosition - offset;\n        window.scrollTo({\n            top: offsetPosition,\n            behavior: \"smooth\"\n        });\n    }\n\n    function pushParameterToUrl(data, config) {\n\n        let path = convertParameterToProductListUrl(data, config)\n        if (path != `${props.location.pathname}${props.location.search}`) {\n            props.loading(true);\n            props.router.replace(path)\n        }\n\n    }\n\n    // function handleClickOutside(event) {\n\n    //     if ((!containerRef.current || !containerRef.current.contains(event.target))) {\n    //         setMoreOptionModalVisible(false)\n    //     }\n    // }\n\n    function getData() {\n        //     let query = queryString.parse(props.location.search);\n        //   if (!query) {\n        //     query = {};\n        //   }\n        //     let sorting = query.sorting ? JSON.parse(query.sorting) : { createdAt: -1 };\n        //     let config = {\n        //         page: query.page,\n        //         view: query.view,\n        //         sorting: sorting\n        //       }\n        if (_.get(profile, ['_id'])) {\n            let sorting = _.cloneDeep(objectRemoveEmptyValue(mainConfig.sorting));\n            if (_.isPlainObject(_.pick(sorting, ['searchPrice', 'mileageFilter', 'carspec.year'])) && !_.isEmpty(_.pick(sorting, ['searchPrice', 'mileageFilter', 'carspec.year']))) {\n            } else {\n                sorting = {}\n            }\n            props.loading(true);\n            let match = { $match: { ...objectRemoveEmptyValue(filterGroup), 'createdBy': _.get(profile, ['_id']) } }\n            axios.get(`${client.io.io.uri}carAdsFilterV3`,\n                {\n                    params: {\n                        match,\n                        sorting: sorting,\n                        limit: PAGESIZE,\n                        skip: (mainConfig.page - 1) * PAGESIZE,\n                    }\n                }\n            ).then((res) => {\n                props.loading(false);\n                if (notEmptyLength(res.data.data)) {\n                    setProductList(res.data.data)\n                    setTotal(res.data.total);\n                } else {\n                    setProductList([])\n                    setTotal(0);\n                }\n            })\n                .catch((err) => {\n                    props.loading(false);\n                    message.error(err.message);\n                })\n        }\n\n        // if (!filterGroup.state) {\n        //      setMainConfig(config);\n        //     return null;\n        //   }\n\n    }\n\n    function getAvailableOptions() {\n        if (_.get(profile, ['_id'])) {\n            let promises = [];\n            let match = { $match: { ...objectRemoveEmptyValue(filterGroup), 'createdBy': _.get(profile, ['_id']) } }\n            _.forEach(filterTypes, function (filterType) {\n                promises.push(\n                    axios.get(`${client.io.io.uri}brandFilterTotalV3`, {\n                        params: { filterType: filterType, match },\n                        headers: { 'Authorization': client.settings.storage.storage.storage['feathers-jwt'] }\n                    })\n                )\n            })\n\n            Promise.all(promises).then((responses) => {\n                if (_.isArray(responses) && !_.isEmpty((responses))) {\n                    let options = {}\n                    _.forEach(responses, function (response, index) {\n                        options[`${filterTypes[index]}List`] = response.data.uniqueInfo[`${filterTypes[index]}List`];\n                    })\n\n\n                    setAvailableFilterOptions(options)\n                }\n            }).catch((err) => {\n                // message.error(err.message);\n            })\n        }\n\n    }\n\n    const _renderGridView = () => {\n        return (\n            <ProductList data={productList} />\n        )\n    }\n\n    const _renderCarOnSale = () => {\n        return (\n            <div style={{ minHeight: 800 }}>\n                <span className=\"flex-items-align-center flex-justify-space-around\">\n                    <span className='flex-justify-center flex-items-align-center margin-x-xs'>\n                        <span style={{fontSize:'12px'}} className='d-inline-block '>\n                            360&deg; View:\n                        </span>\n                        <span className=\"d-inline-block margin-left-xs\">\n                            <Switch checked={_.get(filterGroup, ['car360View'])} onChange={(checked) => { scrollToCarOnSale(); setFilterGroup({ ...filterGroup, car360View: checked }) }} />\n                        </span>\n                    </span>\n\n                    <span className='flex-justify-center flex-items-align-center margin-x-xs'>\n                        <span style={{fontSize:'12px'}} className=\"d-inline-block\">\n                            Ready Stock:\n                        </span>\n                        <span className=\"d-inline-block margin-left-xs\">\n                            <Switch checked={filterGroup.readyStock} onChange={(checked) => { props.loading(true); setFilterGroup({ ...filterGroup, readyStock: checked ? 'yes' : null }); }} />\n                        </span>\n                    </span>\n\n                    <span className='flex-justify-center flex-items-align-center margin-x-xs'>\n                        <span style={{fontSize:'12px'}} className=\"d-inline-block\">\n                            Reg Card:\n                        </span>\n                        <span className=\"margin-left-xs\"> \n                            <Switch checked={_.get(filterGroup, ['registrationUrl'])} onChange={(checked) => { scrollToCarOnSale(); setFilterGroup({ ...filterGroup, registrationUrl: checked }) }} />\n                        </span>\n                    </span>\n                </span>\n\n                <span className=\"flex-items-align-center flex-justify-space-around margin-top-sm margin-x-xs\">\n                    <span className='flex-justify-center flex-items-align-center margin-x-xs'>\n                        <Select allowClear value={_.get(filterGroup, ['make'])}\n                            style={{ width: 120 }}\n                            dropdownMatchSelectWidth={false} placeholder=\"Brand\"\n                            className=\"padding-right-sm\"\n                            onChange={(value) => {\n                                setFilterGroup({ ...filterGroup, make: _.toLower(value) || undefined, model: undefined })\n                                }}\n                            >\n                            {\n                                _.map(_.isArray(_.get(availableFilterOptions, ['makeList'])) && !_.isEmpty(_.get(availableFilterOptions, ['makeList'])) ? _.sortBy(_.get(availableFilterOptions, ['makeList']), 'value') : [], function (item) {\n                                    return (\n                                        <Select.Option value={_.get(item, ['value'])} className=\"capitalize\">\n                                            {_.get(getCarBrand(_.get(item, ['value'])), ['value']) || _.get(item, ['value']) || ''} ({formatNumber(_.get(item, ['count']), 'auto', true, 0, true) || 0})\n                                        </Select.Option>\n                                        )\n                                    })\n                                }\n                        </Select>\n                    </span>\n\n                    <span className='flex-justify-center flex-items-align-center margin-x-xs'>\n                        <Select allowClear value={_.get(filterGroup, ['model'])}\n                            style={{ width: 120 }}\n                            dropdownMatchSelectWidth={false} placeholder=\"Model\"\n                            className=\"padding-right-sm\"\n                            onChange={(value) => {\n                                setFilterGroup({ ...filterGroup, model: _.toLower(value) || undefined })\n                            }}\n                            disabled={!filterGroup.make}\n                            >\n                            {\n                                _.map(_.isArray(_.get(availableFilterOptions, ['modelList'])) && !_.isEmpty(_.get(availableFilterOptions, ['modelList'])) ? _.sortBy(_.get(availableFilterOptions, ['modelList']), 'value') : [], function (item) {\n                                    return (\n                                        <Select.Option value={_.get(item, ['value'])} className=\"capitalize\">\n                                            {_.get(item, ['value']) || ''} ({formatNumber(_.get(item, ['count']), 'auto', true, 0, true) || 0})\n                                        </Select.Option>\n                                        )\n                                    })\n                                }\n                        </Select>\n                    </span>\n\n                    <span className='flex-justify-center flex-items-align-center margin-x-xs'>\n                    <Select defaultValue=\"\" style={{ width: 120 }}\n                                dropdownMatchSelectWidth={false}\n                                dropdownStyle={{alignContent:'left'}}\n                                onChange={(e) => {\n                                    let sorting = {};\n                                    let str = e.split(':') || [];\n                                    sorting[str[0]] = parseInt(str[1]);\n                                    setMainConfig({ ...mainConfig, sorting: sorting, page: 1 })\n                                }}\n                                value={\n                                    _.isPlainObject(mainConfig.sorting) && !_.isEmpty(objectRemoveEmptyValue(mainConfig.sorting)) ?\n                                        `${_.get(Object.entries(mainConfig.sorting), [0, 0])}:${mainConfig.sorting[_.get(Object.entries(mainConfig.sorting), [0, 0])]}`\n                                        :\n                                        ''}\n                            >\n                                <Select.Option value=\"\">Best Value</Select.Option>\n                                <Select.Option value=\"price:1\">Price (Low to High)</Select.Option>\n                                <Select.Option value=\"price:-1\">Price (High to Low)</Select.Option>\n                                <Select.Option value=\"carspec.year:-1\">Year (New to Old)</Select.Option>\n                                <Select.Option value=\"carspec.year:1\">Year (Old to New)</Select.Option>\n                                <Select.Option value=\"mileage:1\">Mileage (Low to High)</Select.Option>\n                                <Select.Option value=\"mileage:-1\">Mileage (High to Low)</Select.Option>\n                            </Select>\n                    </span>\n                </span>\n\n                <Col span={24} className=\"margin-top-lg\">\n                    <Row gutter={[10, 10]}>\n                            {_renderGridView()}\n                    </Row>\n                </Col>\n            </div>\n        )\n    }\n\n    return (\n        <Row type=\"flex\" align=\"start\" justify=\"center\" gutter={[20, 10]}>\n            <Col xs={{ order: 1, span: 24 }} sm={{ order: 1, span: 24 }} md={{ order: 1, span: 24 }} lg={{ order: 1, span: 24 }} xl={{ order: 1, span: 24 }} >\n                <div id=\"user-car-on-sale-container\" style={{ minHeight: \"1000px\", padding: '0px' }}>\n                    {_renderCarOnSale()}\n                </div>\n                <Row gutter={[10, 10]}>\n                    <Col className=\"margin-md\" style={{ textAlign: 'center' }} span={24}>\n                        <Pagination current={mainConfig.page} defaultCurrent={1} pageSize={PAGESIZE} onChange={(page) => { scrollToCarOnSale(); setMainConfig({ ...mainConfig, page: page }) }} total={total} />\n                    </Col>\n                </Row>\n            </Col>\n        </Row>\n    );\n}\n\n\nconst mapStateToProps = state => ({\n    sellCars: state.sellCars,\n    productsList: state.productsList,\n    app: state.app,\n    user: state.user,\n    sellerProfile: state.sellerProfile,\n});\n\nconst mapDispatchToProps = {\n    loading: loading,\n    updateActiveMenu: updateActiveMenu,\n    fetchProductsList: fetchProductsList,\n    updateActiveIdProductList: updateActiveIdProductList,\n    filterCarBrandMode: filterCarBrandMode,\n    filterCarModelMode: filterCarModelMode,\n    filterCarSearchKeywords: filterCarSearchKeywords,\n    quickSearchProductsList: quickSearchProductsList,\n    setApplyYear: setApplyYear,\n    setApplyPrice: setApplyPrice,\n    setApplyMileage: setApplyMileage,\n\n    filterCarBrands: filterCarBrands,\n    filterCarModels: filterCarModels,\n    filterColors: filterColors,\n    filterBodyTypes: filterBodyTypes,\n    filterDrivenWheels: filterDrivenWheels,\n    filterFuelTypes: filterFuelTypes,\n    filterStates: filterStates\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Form.create()(withRouter(UserCarOnSale)));"]},"metadata":{},"sourceType":"module"}