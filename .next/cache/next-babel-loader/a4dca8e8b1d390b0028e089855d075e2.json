{"ast":null,"code":"var _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport { Form } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { v4 } from 'uuid';\nimport { isValidNumber } from '../../common-function';\nimport { withRouter } from 'next/router';\nvar uid = v4();\nvar containerRef = {};\ncontainerRef[uid] = React.createRef();\nvar triggerFunction;\n\nvar WindowScrollLoadWrapper = function WindowScrollLoadWrapper(props) {\n  _s();\n\n  var _useState = useState(100),\n      scrollRange = _useState[0],\n      setScrollRange = _useState[1];\n\n  useEffect(function () {\n    setScrollRange(isValidNumber(props.scrollRange) ? parseFloat(props.scrollRange) : 100);\n  }, [props.scrollRange]);\n  useEffect(function () {\n    window.addEventListener('scroll', handleScroll, {\n      passive: true\n    });\n    return function () {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  });\n\n  function handleScroll(e) {\n    clearTimeout(triggerFunction);\n    var scrollBarHeight = window.innerHeight * (window.innerHeight / document.body.offsetHeight);\n\n    if (window.scrollY + scrollBarHeight + scrollRange >= document.body.scrollHeight) {\n      if (props.onScrolledBottom) {\n        triggerFunction = setTimeout(function () {\n          props.onScrolledBottom();\n        }, 100);\n      }\n    }\n  }\n\n  ;\n  return __jsx(React.Fragment, null, props.children);\n};\n\n_s(WindowScrollLoadWrapper, \"XrbQOUwml15UMwpa+42ex5cg5iI=\");\n\n_c = WindowScrollLoadWrapper;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    app: state.app,\n    user: state.user\n  };\n};\n\nvar mapDispatchToProps = {};\nexport default connect(mapStateToProps, mapDispatchToProps)(Form.create()(withRouter(WindowScrollLoadWrapper)));\n\nvar _c;\n\n$RefreshReg$(_c, \"WindowScrollLoadWrapper\");","map":{"version":3,"sources":["/Users/faraheen/ccar-cms-next-mobile/components/general/WindowScrollLoadWrapper.jsx"],"names":["Form","React","useEffect","useState","connect","v4","isValidNumber","withRouter","uid","containerRef","createRef","triggerFunction","WindowScrollLoadWrapper","props","scrollRange","setScrollRange","parseFloat","window","addEventListener","handleScroll","passive","removeEventListener","e","clearTimeout","scrollBarHeight","innerHeight","document","body","offsetHeight","scrollY","scrollHeight","onScrolledBottom","setTimeout","children","mapStateToProps","state","app","user","mapDispatchToProps","create"],"mappings":";;;AAAA,SAASA,IAAT,QAAqB,MAArB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,EAAT,QAAmB,MAAnB;AACA,SAASC,aAAT,QAA8B,uBAA9B;AACA,SAASC,UAAT,QAA2B,aAA3B;AAGA,IAAIC,GAAG,GAAGH,EAAE,EAAZ;AACA,IAAII,YAAY,GAAG,EAAnB;AACAA,YAAY,CAACD,GAAD,CAAZ,GAAoBP,KAAK,CAACS,SAAN,EAApB;AAEA,IAAIC,eAAJ;;AACA,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACC,KAAD,EAAW;AAAA;;AAEvC,kBAAsCV,QAAQ,CAAC,GAAD,CAA9C;AAAA,MAAOW,WAAP;AAAA,MAAoBC,cAApB;;AAEAb,EAAAA,SAAS,CAAC,YAAM;AACZa,IAAAA,cAAc,CAACT,aAAa,CAACO,KAAK,CAACC,WAAP,CAAb,GAAmCE,UAAU,CAACH,KAAK,CAACC,WAAP,CAA7C,GAAmE,GAApE,CAAd;AACH,GAFQ,EAEN,CAACD,KAAK,CAACC,WAAP,CAFM,CAAT;AAIAZ,EAAAA,SAAS,CAAC,YAAM;AAEZe,IAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCC,YAAlC,EAAgD;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAAhD;AAEA,WAAO,YAAM;AACTH,MAAAA,MAAM,CAACI,mBAAP,CAA2B,QAA3B,EAAqCF,YAArC;AACH,KAFD;AAGH,GAPQ,CAAT;;AASA,WAASA,YAAT,CAAsBG,CAAtB,EAAyB;AACrBC,IAAAA,YAAY,CAACZ,eAAD,CAAZ;AACA,QAAIa,eAAe,GAAGP,MAAM,CAACQ,WAAP,IAAsBR,MAAM,CAACQ,WAAP,GAAqBC,QAAQ,CAACC,IAAT,CAAcC,YAAzD,CAAtB;;AACA,QAAIX,MAAM,CAACY,OAAP,GAAiBL,eAAjB,GAAmCV,WAAnC,IAAkDY,QAAQ,CAACC,IAAT,CAAcG,YAApE,EAAkF;AAC9E,UAAIjB,KAAK,CAACkB,gBAAV,EAA4B;AACxBpB,QAAAA,eAAe,GAAGqB,UAAU,CAAC,YAAM;AAC/BnB,UAAAA,KAAK,CAACkB,gBAAN;AACH,SAF2B,EAEzB,GAFyB,CAA5B;AAGH;AACJ;AAEJ;;AAAA;AAED,SACI,MAAC,KAAD,CAAO,QAAP,QACKlB,KAAK,CAACoB,QADX,CADJ;AAKH,CAnCD;;GAAMrB,uB;;KAAAA,uB;;AAsCN,IAAMsB,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,KAAK;AAAA,SAAK;AAC9BC,IAAAA,GAAG,EAAED,KAAK,CAACC,GADmB;AAE9BC,IAAAA,IAAI,EAAEF,KAAK,CAACE;AAFkB,GAAL;AAAA,CAA7B;;AAKA,IAAMC,kBAAkB,GAAG,EAA3B;AAEA,eAAelC,OAAO,CAAC8B,eAAD,EAAkBI,kBAAlB,CAAP,CAA6CtC,IAAI,CAACuC,MAAL,GAAchC,UAAU,CAACK,uBAAD,CAAxB,CAA7C,CAAf","sourcesContent":["import { Form } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { v4 } from 'uuid';\nimport { isValidNumber } from '../../common-function';\nimport { withRouter } from 'next/router';\n\n\nlet uid = v4();\nlet containerRef = {};\ncontainerRef[uid] = React.createRef();\n\nlet triggerFunction;\nconst WindowScrollLoadWrapper = (props) => {\n\n    const [scrollRange, setScrollRange] = useState(100);\n\n    useEffect(() => {\n        setScrollRange(isValidNumber(props.scrollRange) ? parseFloat(props.scrollRange) : 100)\n    }, [props.scrollRange])\n\n    useEffect(() => {\n\n        window.addEventListener('scroll', handleScroll, { passive: true });\n\n        return () => {\n            window.removeEventListener('scroll', handleScroll);\n        };\n    })\n\n    function handleScroll(e) {\n        clearTimeout(triggerFunction)\n        let scrollBarHeight = window.innerHeight * (window.innerHeight / document.body.offsetHeight);\n        if (window.scrollY + scrollBarHeight + scrollRange >= document.body.scrollHeight) {\n            if (props.onScrolledBottom) {\n                triggerFunction = setTimeout(() => {\n                    props.onScrolledBottom();\n                }, 100);\n            }\n        }\n\n    };\n\n    return (\n        <React.Fragment>\n            {props.children}\n        </React.Fragment>\n    );\n}\n\n\nconst mapStateToProps = state => ({\n    app: state.app,\n    user: state.user,\n});\n\nconst mapDispatchToProps = {\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Form.create()(withRouter(WindowScrollLoadWrapper)));"]},"metadata":{},"sourceType":"module"}