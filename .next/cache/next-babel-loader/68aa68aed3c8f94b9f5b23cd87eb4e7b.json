{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Card, Form, message } from 'antd';\nimport _ from 'lodash';\nimport { withRouter } from 'next/dist/client/router';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { useMediaQuery } from 'react-responsive';\nimport { notEmptyLength } from '../../../common-function';\nimport { filterCarBrandMode, filterCarModelMode, filterCarSearchKeywords, loading, loginMode, quickSearchProductsList, updateActiveMenu } from '../../../redux/actions/app-actions';\nimport { fetchProductsList, updateActiveIdProductList } from '../../../redux/actions/productsList-actions';\nimport { setUser } from '../../../redux/actions/user-actions';\nimport LayoutV2 from '../../general/LayoutV2';\nimport DealerProfile from '../DealerProfile';\nimport ProfileNotFound from '../ProfileNotFound';\nimport UserProfile from '../UserProfile';\nimport client from '../../../feathers';\nconst {\n  Meta\n} = Card;\n\nconst ProfileHomePage = props => {\n  const {\n    0: userType,\n    1: setUserType\n  } = useState('user');\n  const {\n    0: profile,\n    1: setProfile\n  } = useState({});\n  const {\n    0: isOwn,\n    1: setIsOwn\n  } = useState(false);\n  useEffect(() => {}, []);\n  useEffect(() => {\n    getProfile();\n  }, [props.router.query.id]);\n  useEffect(() => {}, [isOwn]);\n  useEffect(() => {\n    setIsOwn(_.get(props.user, ['authenticated']) && _.get(props.user, ['info', 'user', '_id']) == _.get(profile, ['_id']));\n  }, [props.user.authenticated, profile]);\n  useEffect(() => {\n    if (_.isPlainObject(profile) && !_.isEmpty(profile)) {\n      setUser(profile);\n    }\n  }, [profile]);\n\n  function getProfile() {\n    props.loading(true);\n    client.service('users').find({\n      query: {\n        userurlId: props.router.query.id,\n        $populate: [{\n          path: 'companyId',\n          ref: 'companys'\n        }]\n      }\n    }).then(res => {\n      props.loading(false);\n      setProfile(_.isArray(res.data) && notEmptyLength(res.data) ? res.data[0] : {});\n      setIsOwn(_.get(props.user, ['authenticated']) && _.get(props.user, ['info', 'user', '_id']) == props.router.query.id);\n      setUserType(_.get(res, ['data', 0, 'role']) ? _.get(res, ['data', 0, 'role']) == 'mobile-user' || _.get(res, ['data', 0, 'role']) == 'normaluser' ? 'user' : 'dealer' : '');\n    }).catch(err => {\n      props.loading(false);\n      message.error(err.message);\n    });\n  }\n\n  return __jsx(LayoutV2, null, __jsx(\"div\", {\n    className: \"section-version3\"\n  }, __jsx(\"div\", {\n    className: \"container-version3\",\n    style: {\n      touchAction: 'pan-y'\n    }\n  }, userType == 'user' ? __jsx(UserProfile, {\n    data: profile,\n    isOwn: isOwn,\n    onChangeCoverPhoto: url => {\n      setProfile(_objectSpread(_objectSpread({}, profile), {}, {\n        profileCoverPhoto: url\n      }));\n    }\n  }) : userType == 'dealer' ? __jsx(DealerProfile, {\n    data: profile,\n    isOwn: isOwn,\n    onChangeCoverPhoto: url => {\n      setProfile(_objectSpread(_objectSpread({}, profile), {}, {\n        profileCoverPhoto: url\n      }));\n    }\n  }) : __jsx(ProfileNotFound, null))));\n};\n\nconst mapStateToProps = state => ({\n  sellCars: state.sellCars,\n  productsList: state.productsList,\n  app: state.app,\n  user: state.user\n});\n\nconst mapDispatchToProps = {\n  loginMode: loginMode,\n  updateActiveMenu: updateActiveMenu,\n  fetchProductsList: fetchProductsList,\n  updateActiveIdProductList: updateActiveIdProductList,\n  filterCarBrandMode: filterCarBrandMode,\n  filterCarModelMode: filterCarModelMode,\n  filterCarSearchKeywords: filterCarSearchKeywords,\n  quickSearchProductsList: quickSearchProductsList,\n  loading: loading,\n  setUser\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Form.create()(withRouter(ProfileHomePage)));","map":{"version":3,"sources":["/Users/faraheen/ccar-cms-next-mobile/components/profile/page/ProfileHomePage.jsx"],"names":["Card","Form","message","_","withRouter","React","useEffect","useState","connect","useMediaQuery","notEmptyLength","filterCarBrandMode","filterCarModelMode","filterCarSearchKeywords","loading","loginMode","quickSearchProductsList","updateActiveMenu","fetchProductsList","updateActiveIdProductList","setUser","LayoutV2","DealerProfile","ProfileNotFound","UserProfile","client","Meta","ProfileHomePage","props","userType","setUserType","profile","setProfile","isOwn","setIsOwn","getProfile","router","query","id","get","user","authenticated","isPlainObject","isEmpty","service","find","userurlId","$populate","path","ref","then","res","isArray","data","catch","err","error","touchAction","url","profileCoverPhoto","mapStateToProps","state","sellCars","productsList","app","mapDispatchToProps","create"],"mappings":"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","sourcesContent":["import { Card, Form, message } from 'antd';\nimport _ from 'lodash';\nimport { withRouter } from 'next/dist/client/router';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { useMediaQuery } from 'react-responsive';\nimport { notEmptyLength } from '../../../common-function';\nimport { filterCarBrandMode, filterCarModelMode, filterCarSearchKeywords, loading, loginMode, quickSearchProductsList, updateActiveMenu } from '../../../redux/actions/app-actions';\nimport { fetchProductsList, updateActiveIdProductList } from '../../../redux/actions/productsList-actions';\nimport { setUser } from '../../../redux/actions/user-actions';\nimport LayoutV2 from '../../general/LayoutV2';\nimport DealerProfile from '../DealerProfile';\nimport ProfileNotFound from '../ProfileNotFound';\nimport UserProfile from '../UserProfile';\nimport client from '../../../feathers';\n\n\nconst { Meta } = Card;\n\n\nconst ProfileHomePage = (props) => {\n\n\n    const [userType, setUserType] = useState('user');\n    const [profile, setProfile] = useState({});\n    const [isOwn, setIsOwn] = useState(false);\n\n    useEffect(() => { \n \n    } , [])\n\n    useEffect(() => {\n        getProfile();\n    }, [props.router.query.id])\n\n    useEffect(() => {\n    }, [isOwn])\n\n    useEffect(() => {\n \n        setIsOwn(_.get(props.user, ['authenticated']) && _.get(props.user, ['info', 'user', '_id']) == _.get(profile, ['_id']))\n    }, [props.user.authenticated, profile])\n\n    useEffect(() => {\n        if (_.isPlainObject(profile) && !_.isEmpty(profile)) {\n            setUser(profile);\n        }\n\n    }, [profile])\n\n    function getProfile() {\n        props.loading(true);\n        client.service('users').find({\n            query: {\n                userurlId: props.router.query.id,\n                $populate: [\n                    {\n                        path: 'companyId',\n                        ref: 'companys'\n                    }\n                ],\n            }\n        }).then(res => {\n            props.loading(false);\n            setProfile(_.isArray(res.data) && notEmptyLength(res.data) ? res.data[0] : {})\n            setIsOwn(_.get(props.user, ['authenticated']) && _.get(props.user, ['info', 'user', '_id']) == props.router.query.id)\n            setUserType(_.get(res, ['data', 0, 'role']) ? _.get(res, ['data', 0, 'role']) == 'mobile-user' || _.get(res, ['data', 0, 'role']) == 'normaluser' ? 'user' : 'dealer' : '')\n        }).catch(err => {\n            props.loading(false);\n            message.error(err.message)\n        });\n    }\n\n\n    return (\n        <LayoutV2>\n            <div className=\"section-version3\">\n                <div className=\"container-version3\" style={{ touchAction: 'pan-y' }}>\n                    {\n                        userType == 'user' ?\n                            <UserProfile data={profile} isOwn={isOwn} onChangeCoverPhoto={(url) => {\n                                setProfile({ ...profile, profileCoverPhoto: url })\n                            }}\n                            />\n                            :\n                            userType == 'dealer' ?\n                            <DealerProfile data={profile} isOwn={isOwn} onChangeCoverPhoto={(url) => {\n                                setProfile({ ...profile, profileCoverPhoto: url })\n                            }} \n                            />\n                            :\n                            <ProfileNotFound />\n                        }\n                    </div>\n                </div>\n           \n\n        </LayoutV2 >\n    );\n}\n\nconst mapStateToProps = state => ({\n    sellCars: state.sellCars,\n    productsList: state.productsList,\n    app: state.app,\n    user: state.user,\n});\n\n\nconst mapDispatchToProps = {\n    loginMode: loginMode,\n    updateActiveMenu: updateActiveMenu,\n    fetchProductsList: fetchProductsList,\n    updateActiveIdProductList: updateActiveIdProductList,\n    filterCarBrandMode: filterCarBrandMode,\n    filterCarModelMode: filterCarModelMode,\n    filterCarSearchKeywords: filterCarSearchKeywords,\n    quickSearchProductsList: quickSearchProductsList,\n\n    loading: loading,\n    setUser,\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Form.create()(withRouter(ProfileHomePage)));\n"]},"metadata":{},"sourceType":"module"}