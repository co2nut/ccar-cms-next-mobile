{"ast":null,"code":"var __jsx = React.createElement;\nimport { SearchOutlined } from '@ant-design/icons';\nimport { AutoComplete, Form, Input, message } from 'antd';\nimport axios from \"axios\";\nimport _ from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport Highlighter from 'react-highlight-words';\nimport { connect } from 'react-redux';\nimport { useMediaQuery } from 'react-responsive';\nimport { v4 } from 'uuid';\nimport client from '../../feathers';\nimport { parseTagStringToPlainString } from '../carFreak/config';\nimport { notEmptyLength, convertParameterToProductListUrl, formatNumber, arrayLengthCount } from '../../common-function';\nimport { loading } from '../../redux/actions/app-actions';\nimport { withRouter } from 'next/router';\n\nconst Desktop = ({\n  children\n}) => {\n  const isDesktop = useMediaQuery({\n    minWidth: 992\n  });\n  return isDesktop ? children : null;\n};\n\nconst Tablet = ({\n  children\n}) => {\n  const isTablet = useMediaQuery({\n    minWidth: 768,\n    maxWidth: 991\n  });\n  return isTablet ? children : null;\n};\n\nconst Mobile = ({\n  children\n}) => {\n  const isMobile = useMediaQuery({\n    maxWidth: 767\n  });\n  return isMobile ? children : null;\n};\n\nconst Default = ({\n  children\n}) => {\n  const isNotMobile = useMediaQuery({\n    minWidth: 768\n  });\n  return isNotMobile ? children : null;\n};\n\nconst {\n  Option,\n  OptGroup\n} = AutoComplete;\nconst WORD_LENGTH_TO_START_SEARCH = 2;\nconst searchBarRef = React.createRef();\nconst SEARCH_SECTIONS = [// {\n//     value: 'carFreak',\n//     text: 'CarFreaks'\n// },\n{\n  value: 'socialBoard',\n  text: 'Social Board'\n}, {\n  value: 'dealerWithAds',\n  text: 'Dealer'\n}, {\n  value: 'people',\n  text: 'User'\n}, {\n  value: 'dealer',\n  text: 'Dealer'\n}, {\n  value: 'productAds',\n  text: 'CarMarket'\n}, {\n  value: 'carspec',\n  text: 'All-NewCar'\n}];\n\nconst GlobalSearchBar = props => {\n  const {\n    0: searchValue,\n    1: setSearchValue\n  } = useState(null);\n  const {\n    0: searchWords,\n    1: setSearchWords\n  } = useState([]);\n  const {\n    0: dataSource,\n    1: setDataSource\n  } = useState([]);\n  const {\n    0: typingTimeout,\n    1: setTypingTimeout\n  } = useState();\n  const {\n    0: searchType,\n    1: setSearchType\n  } = useState();\n  const {\n    0: searchTypes,\n    1: setSearchTypes\n  } = useState();\n  const {\n    0: isEmptyDataSource,\n    1: setIsEmptyDataSource\n  } = useState(true);\n  const {\n    0: isFocused,\n    1: setIsFocused\n  } = useState(false);\n  useEffect(() => {\n    if (props.searchTypes == 'all' || !props.searchTypes) {\n      setSearchTypes(SEARCH_SECTIONS);\n    } else {\n      let availableSections = _.compact(_.map(props.searchTypes, function (item) {\n        let selectedSection = _.find(SEARCH_SECTIONS, function (section) {\n          return _.isPlainObject(item) && !_.isEmpty(item) ? _.toLower(item.value) == _.toLower(section.value) : _.toLower(item) == _.toLower(section.value);\n        });\n\n        if (!selectedSection) {\n          return null;\n        }\n\n        return _.isPlainObject(item) && !_.isEmpty(item) && _.get(item, ['text']) ? item : selectedSection;\n      }));\n\n      setSearchTypes(availableSections || []);\n    }\n  }, [props.searchTypes]);\n\n  function handleSearch(value) {\n    // value = value.replace(/[\\W_]/g, \"\");\n    // value = value.replace(/[^a-zA-Z ]/g, \"\");\n    setDataSource([]);\n    setIsEmptyDataSource(true);\n\n    if (!value || value.length < WORD_LENGTH_TO_START_SEARCH) {\n      setSearchWords([]);\n    } else {\n      clearTimeout(typingTimeout);\n      setTypingTimeout(setTimeout(() => {\n        axios.post(`${client.io.io.uri}globalSearch`, {\n          params: {\n            keywords: value.trim(),\n            filterType: _.map(searchTypes, 'value')\n          }\n        }).then(res => {\n          let dataSource = [];\n\n          _.forEach(searchTypes, function (v) {\n            if (_.isArray(_.get(res, ['data', 'result', v.value, 'data'])) && !_.isEmpty(_.get(res, ['data', 'result', v.value, 'data']))) {\n              setIsEmptyDataSource(false);\n            }\n\n            dataSource.push({\n              title: v.text,\n              children: _.get(res, ['data', 'result', v.value, 'data']) || [],\n              total: _.get(res, ['data', 'result', v.value, 'total']) || 0,\n              value: v.value\n            });\n          });\n\n          setDataSource(dataSource);\n          setSearchWords(notEmptyLength(value.split(' ')) ? value.split(' ') : []);\n          setTypingTimeout();\n        }).catch(err => {\n          message.error(err.message);\n        });\n      }, 700));\n    }\n  }\n\n  ;\n\n  const renderTitle = (title, total) => {\n    return __jsx(\"span\", null, title, __jsx(\"a\", {\n      href: \"#\",\n      style: {\n        float: 'right'\n      }\n    }, \"Total: \", total));\n  };\n\n  const restructData = data => {\n    let base = [__jsx(Option, {\n      disabled: true,\n      key: \"all\",\n      className: \"show-all\"\n    }, __jsx(Desktop, null, __jsx(\"p\", null, \"Search Car/Dealer Name\")), __jsx(Tablet, null, __jsx(\"p\", null, \"Search Car/Dealer Name\")), __jsx(Mobile, null, __jsx(\"p\", null, \"Car/Dealer Name\")))];\n\n    if (notEmptyLength(data)) {\n      let list = data.map(group => {\n        switch (_.get(group, ['value'])) {\n          // case 'carFreak':\n          //     return (\n          //         <OptGroup key={group.title} label={renderTitle(group.title, group.total)}>\n          //             {\n          //                 _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ?\n          //                     group.children.map((opt, index) => (\n          //                         <Option key={`${group.title}-${index}`} value={parseTagStringToPlainString(`${opt.title || ''} | ${opt.content || ''}`)} onClick={() => {\n          //                             if (_.isPlainObject(opt)) {\n          //                                 if (opt._id) {\n          //                                     props.router.push('/car-freaks/' + opt._id);\n          //                                 }\n          //                             }\n          //                         }}>\n          //                             <Highlighter\n          //                                 style={{ padding: '0px 10px' }}\n          //                                 highlightStyle={{ color: '#ffc069', padding: 0 }}\n          //                                 textToHighlight={parseTagStringToPlainString(`${opt.title || ''} | ${opt.content || ''}`)}\n          //                                 autoEscape={true}\n          //                                 className=\"overline\"\n          //                                 searchWords={searchWords} />\n          //                         </Option>\n          //                     ))\n          //                     :\n          //                     <Option key={`${group.title}NotFound`} value={`${group.title}NotFound`} disabled>\n          //                         <span className='d-inline-block overline' style={{ padding: '0px 10px' }} >\n          //                             {group.title} Not Found\n          //                         </span>\n          //                     </Option>\n          //             }\n          //         </OptGroup>\n          //     )\n          //     break;\n          case 'socialBoard':\n            return __jsx(OptGroup, {\n              key: group.title,\n              label: renderTitle(group.title, group.total)\n            }, _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ? group.children.map((opt, index) => __jsx(Option, {\n              key: `${group.title}-${index}`,\n              value: parseTagStringToPlainString(`${opt.title || ''} | ${opt.content || ''}`),\n              onClick: () => {\n                if (_.isPlainObject(opt)) {\n                  if (opt._id) {\n                    props.router.push('/social-board/' + opt._id);\n                  }\n                }\n              }\n            }, __jsx(Highlighter, {\n              style: {\n                padding: '0px 10px'\n              },\n              highlightStyle: {\n                color: '#ffc069',\n                padding: 0\n              },\n              textToHighlight: parseTagStringToPlainString(`${opt.title || ''} | ${opt.content || ''}`),\n              autoEscape: true,\n              className: \"overline\",\n              searchWords: searchWords\n            }))) : __jsx(Option, {\n              key: `${group.title}NotFound`,\n              value: `${group.title}NotFound`,\n              disabled: true\n            }, __jsx(\"span\", {\n              className: \"d-inline-block overline\",\n              style: {\n                padding: '0px 10px'\n              }\n            }, group.title, \" Not Found\")));\n            break;\n\n          case 'people':\n            return __jsx(OptGroup, {\n              key: group.title,\n              label: renderTitle(group.title, group.total)\n            }, _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ? group.children.map((opt, index) => __jsx(Option, {\n              key: `${group.title}-${index}`,\n              value: `${opt.freakId || ''}`,\n              onClick: () => {\n                if (_.isPlainObject(opt) && !_.isEmpty(opt)) {\n                  if (opt.userurlId) {\n                    props.router.push(`/profile/${opt.userurlId}`);\n                  }\n                }\n              }\n            }, __jsx(Highlighter, {\n              style: {\n                padding: '0px 10px'\n              },\n              highlightStyle: {\n                color: '#ffc069',\n                padding: 0\n              },\n              textToHighlight: `${opt.freakId || ''}`,\n              autoEscape: true,\n              className: \"overline\",\n              searchWords: searchWords\n            }))) : __jsx(Option, {\n              key: `${group.title}NotFound`,\n              value: `${group.title}NotFound`,\n              disabled: true\n            }, __jsx(\"span\", {\n              className: \"d-inline-block overline\",\n              style: {\n                padding: '0px 10px'\n              }\n            }, group.title, \" Not Found\")));\n            break;\n\n          case 'dealer':\n            return __jsx(OptGroup, {\n              key: group.title,\n              label: renderTitle(group.title, group.total)\n            }, _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ? group.children.map((opt, index) => __jsx(Option, {\n              key: `${group.title}-${index}`,\n              value: `${opt.freakId || ''}`,\n              onClick: () => {\n                if (_.isPlainObject(opt) && !_.isEmpty(opt)) {\n                  if (opt._id) {\n                    props.router.push(`/dealer/${opt.companyurlId}/${opt.userurlId}`);\n                  }\n                }\n              }\n            }, __jsx(Highlighter, {\n              style: {\n                padding: '0px 10px'\n              },\n              highlightStyle: {\n                color: '#ffc069',\n                padding: 0\n              },\n              textToHighlight: `${opt.freakId || ''}`,\n              autoEscape: true,\n              className: \"overline\",\n              searchWords: searchWords\n            }))) : __jsx(Option, {\n              key: `${group.title}NotFound`,\n              value: `${group.title}NotFound`,\n              disabled: true\n            }, __jsx(\"span\", {\n              className: \"d-inline-block overline\",\n              style: {\n                padding: '0px 10px'\n              }\n            }, group.title, \" Not Found\")));\n\n          case 'productAds':\n            return __jsx(OptGroup, {\n              key: group.title,\n              label: renderTitle(group.title, group.total)\n            }, _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ? group.children.map((opt, index) => __jsx(Option, {\n              key: `${group.title}-${index}`,\n              value: `${opt.make ? opt.make : ''} ${opt.model ? opt.model : ''}`,\n              onClick: e => {\n                let path = convertParameterToProductListUrl({\n                  make: _.toLower(opt.make),\n                  model: _.toLower(opt.model)\n                });\n                props.router.push(path);\n              }\n            }, __jsx(Highlighter, {\n              style: {\n                padding: '0px 10px'\n              },\n              highlightStyle: {\n                color: '#ffc069',\n                padding: 0\n              },\n              textToHighlight: `${opt.make ? opt.make : ''} ${opt.model ? opt.model : ''} (${opt.total ? opt.total : ''})` // textToHighlight={`${opt.title || ''} (${opt.total ? opt.total : ''})`}\n              ,\n              autoEscape: true,\n              className: \"overline\",\n              searchWords: searchWords\n            }))) : __jsx(Option, {\n              key: `${group.title}NotFound`,\n              value: `${group.title}NotFound`,\n              disabled: true\n            }, __jsx(\"span\", {\n              className: \"d-inline-block overline\",\n              style: {\n                padding: '0px 10px'\n              }\n            }, group.title, \" Not Found\")));\n            break;\n\n          case 'carspec':\n            return __jsx(OptGroup, {\n              key: group.title,\n              label: renderTitle(group.title, group.total)\n            }, _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ? group.children.map((opt, index) => __jsx(Option, {\n              key: `${group.title}-${index}`,\n              value: `${opt.make ? opt.make : ''} ${opt.model ? opt.model : ''}`,\n              onClick: () => {\n                props.router.push(`/newcar/details/${opt.make}/${opt.model}`);\n                window.location.reload();\n              }\n            }, __jsx(Highlighter, {\n              style: {\n                padding: '0px 10px'\n              },\n              highlightStyle: {\n                color: '#ffc069',\n                padding: 0\n              },\n              textToHighlight: `${opt.make ? opt.make : ''} ${opt.model ? opt.model : ''}`,\n              autoEscape: true,\n              className: \"overline\",\n              searchWords: searchWords\n            }))) : __jsx(Option, {\n              key: `${group.title}NotFound`,\n              value: `${group.title}NotFound`,\n              disabled: true\n            }, __jsx(\"span\", {\n              className: \"d-inline-block overline\",\n              style: {\n                padding: '0px 10px'\n              }\n            }, group.title, \" Not Found\")));\n\n          case 'dealerWithAds':\n            return __jsx(OptGroup, {\n              key: group.title,\n              label: renderTitle(group.title, group.total)\n            }, _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ? group.children.map((opt, index) => __jsx(Option, {\n              key: `${group.title}-${index}`,\n              value: `${opt.fullName || ''} | ${opt.companyName ? opt.companyName : ''}`,\n              onClick: () => {\n                if (opt.companyurlId && opt.userurlId) {\n                  props.router.push(`/dealer/${_.get(opt, 'companyurlId')}/${_.get(opt, 'userurlId')}`);\n                }\n              }\n            }, __jsx(Highlighter, {\n              style: {\n                padding: '0px 10px'\n              },\n              highlightStyle: {\n                color: '#ffc069',\n                padding: 0\n              },\n              textToHighlight: `${opt.fullName || ''} | ${opt.companyName ? opt.companyName : ''} (${formatNumber(opt.total, 'auto', true, 0, true)})`,\n              autoEscape: true,\n              className: \"overline\",\n              searchWords: searchWords\n            }))) : __jsx(Option, {\n              key: 'notFoundCompany',\n              value: 'notFoundCompany',\n              disabled: true\n            }, __jsx(\"span\", {\n              className: \"d-inline-block overline\",\n              style: {\n                padding: '0px 10px'\n              },\n              disabled: true\n            }, group.title, \" Not Found\")));\n\n          case 'company':\n            return __jsx(OptGroup, {\n              key: group.title,\n              label: renderTitle(group.title, group.total)\n            }, _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ? group.children.map((opt, index) => __jsx(Option, {\n              key: `${group.title}-${index}`,\n              onClick: () => {\n                props.router.push('/profile/' + opt.userurlId);\n              }\n            }, __jsx(Highlighter, {\n              style: {\n                padding: '0px 10px'\n              },\n              highlightStyle: {\n                color: '#ffc069',\n                padding: 0\n              },\n              textToHighlight: opt.name ? opt.name : '',\n              autoEscape: true,\n              className: \"overline\",\n              searchWords: searchWords\n            }))) : __jsx(Option, {\n              key: `${group.title}NotFound`,\n              value: `${group.title}NotFound`,\n              disabled: true\n            }, __jsx(\"span\", {\n              className: \"d-inline-block overline\",\n              style: {\n                padding: '0px 10px'\n              }\n            }, group.title, \" Not Found\")));\n\n          default:\n            return __jsx(OptGroup, {\n              key: v4(),\n              label: renderTitle('Others', group.total)\n            }, _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ? group.children.map((opt, index) => __jsx(Option, {\n              key: `${group.title}-${index}`\n            }, __jsx(Highlighter, {\n              style: {\n                padding: '0px 10px'\n              },\n              highlightStyle: {\n                color: '#ffc069',\n                padding: 0\n              },\n              textToHighlight: opt.value ? opt.value : '',\n              autoEscape: true,\n              className: \"overline\",\n              searchWords: searchWords\n            }))) : __jsx(Option, {\n              key: `othersNotFound`,\n              value: `othersNotFound`\n            }, __jsx(\"span\", {\n              className: \"d-inline-block overline\",\n              style: {\n                padding: '0px 10px'\n              },\n              disabled: true\n            }, \"Not Found\")));\n        }\n      });\n      base = _.union(list, base);\n    }\n\n    return base;\n  };\n\n  return __jsx(React.Fragment, null, __jsx(AutoComplete, {\n    className: \"certain-category-search layout-global-search\",\n    dropdownClassName: \"certain-category-search-dropdown group-item-scroll\" // dropdownMatchSelectWidth={false}\n    ,\n    dropdownStyle: {\n      width: 300\n    } // size=\"large\"\n    ,\n    style: {\n      width: '100%'\n    },\n    ref: searchBarRef,\n    dataSource: restructData(dataSource),\n    onSearch: handleSearch,\n    placeholder: \"Search here\",\n    optionLabelProp: \"value\",\n    open: !isEmptyDataSource && isFocused,\n    onChange: value => {\n      setSearchValue(value);\n    },\n    onSelect: () => {\n      setIsFocused(false);\n      setIsEmptyDataSource(true);\n\n      if (searchBarRef.current) {\n        searchBarRef.current.blur();\n      }\n    },\n    defaultActiveFirstOption: false,\n    onFocus: () => {\n      setIsFocused(true);\n    },\n    onBlur: () => {\n      setIsFocused(false);\n    }\n  }, __jsx(Input, {\n    className: \"search-input\",\n    border: \"false\",\n    size: \"large\",\n    value: searchValue // onSearch={() => props.router.push('/cars-on-sale')}\n    ,\n    onPressEnter: e => {\n      if (e.target.value) {\n        // let path = `/cars-on-sale-search?page=${1}${`&${queryStringifyNestedObject({ title: searchValue })}`}`;\n        if (props.enterSearchCarFreaks) {\n          let text = e.target.value || '';\n          let canSearchHashTag = false;\n\n          if (text.indexOf('#') == 0 && arrayLengthCount(text.split(' ')) == 1) {\n            canSearchHashTag = true;\n          }\n\n          text = text.replace('#', '');\n\n          if (canSearchHashTag) {\n            props.router.push(`/hashtag/${text}`);\n          } else {\n            props.router.push(`/search-car-freaks?matchStr=${text}`);\n          }\n        } else {\n          let path = convertParameterToProductListUrl({\n            title: searchValue\n          });\n          props.router.push(path);\n        }\n      }\n    },\n    suffix: __jsx(SearchOutlined, {\n      onClick: e => {\n        // let path = `/cars-on-sale-search?page=${1}${`&${queryStringifyNestedObject({ title: searchValue })}`}`;\n        let path = convertParameterToProductListUrl({\n          title: searchValue\n        });\n        props.router.push(path);\n      }\n    })\n  })));\n};\n\nconst mapStateToProps = state => ({\n  app: state.app,\n  user: state.user\n});\n\nconst mapDispatchToProps = {\n  loading\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(GlobalSearchBar));","map":{"version":3,"sources":["/Users/faraheen/ccar-cms-next-mobile/components/general/global-search-bar.jsx"],"names":["SearchOutlined","AutoComplete","Form","Input","message","axios","_","React","useEffect","useState","Highlighter","connect","useMediaQuery","v4","client","parseTagStringToPlainString","notEmptyLength","convertParameterToProductListUrl","formatNumber","arrayLengthCount","loading","withRouter","Desktop","children","isDesktop","minWidth","Tablet","isTablet","maxWidth","Mobile","isMobile","Default","isNotMobile","Option","OptGroup","WORD_LENGTH_TO_START_SEARCH","searchBarRef","createRef","SEARCH_SECTIONS","value","text","GlobalSearchBar","props","searchValue","setSearchValue","searchWords","setSearchWords","dataSource","setDataSource","typingTimeout","setTypingTimeout","searchType","setSearchType","searchTypes","setSearchTypes","isEmptyDataSource","setIsEmptyDataSource","isFocused","setIsFocused","availableSections","compact","map","item","selectedSection","find","section","isPlainObject","isEmpty","toLower","get","handleSearch","length","clearTimeout","setTimeout","post","io","uri","params","keywords","trim","filterType","then","res","forEach","v","isArray","push","title","total","split","catch","err","error","renderTitle","float","restructData","data","base","list","group","opt","index","content","_id","router","padding","color","freakId","userurlId","companyurlId","make","model","e","path","window","location","reload","fullName","companyName","name","union","width","current","blur","target","enterSearchCarFreaks","canSearchHashTag","indexOf","replace","mapStateToProps","state","app","user","mapDispatchToProps"],"mappings":"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","sourcesContent":["import { SearchOutlined } from '@ant-design/icons';\nimport { AutoComplete, Form, Input, message } from 'antd';\nimport axios from \"axios\";\nimport _ from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport Highlighter from 'react-highlight-words';\nimport { connect } from 'react-redux';\nimport { useMediaQuery } from 'react-responsive';\nimport { v4 } from 'uuid';\nimport client from '../../feathers';\nimport { parseTagStringToPlainString } from '../carFreak/config';\nimport { notEmptyLength, convertParameterToProductListUrl, formatNumber, arrayLengthCount } from '../../common-function';\nimport { loading } from '../../redux/actions/app-actions';\nimport { withRouter } from 'next/router';\n\n\n\nconst Desktop = ({ children }) => {\n    const isDesktop = useMediaQuery({ minWidth: 992 })\n    return isDesktop ? children : null\n}\nconst Tablet = ({ children }) => {\n    const isTablet = useMediaQuery({ minWidth: 768, maxWidth: 991 })\n    return isTablet ? children : null\n}\nconst Mobile = ({ children }) => {\n    const isMobile = useMediaQuery({ maxWidth: 767 })\n    return isMobile ? children : null\n}\nconst Default = ({ children }) => {\n    const isNotMobile = useMediaQuery({ minWidth: 768 })\n    return isNotMobile ? children : null\n}\n\nconst { Option, OptGroup } = AutoComplete;\nconst WORD_LENGTH_TO_START_SEARCH = 2;\n\nconst searchBarRef = React.createRef();\n\nconst SEARCH_SECTIONS = [\n    // {\n    //     value: 'carFreak',\n    //     text: 'CarFreaks'\n    // },\n    {\n        value: 'socialBoard',\n        text: 'Social Board'\n    },\n    {\n        value: 'dealerWithAds',\n        text: 'Dealer',\n    },\n    {\n        value: 'people',\n        text: 'User',\n    },\n    {\n        value: 'dealer',\n        text: 'Dealer',\n    },\n    {\n        value: 'productAds',\n        text: 'CarMarket',\n    },\n    {\n        value: 'carspec',\n        text: 'All-NewCar',\n    },\n]\n\nconst GlobalSearchBar = (props) => {\n\n    const [searchValue, setSearchValue] = useState(null);\n    const [searchWords, setSearchWords] = useState([]);\n    const [dataSource, setDataSource] = useState([]);\n    const [typingTimeout, setTypingTimeout] = useState();\n    const [searchType, setSearchType] = useState();\n    const [searchTypes, setSearchTypes] = useState();\n    const [isEmptyDataSource, setIsEmptyDataSource] = useState(true);\n    const [isFocused, setIsFocused] = useState(false);\n\n    useEffect(() => {\n        if (props.searchTypes == 'all' || !props.searchTypes) {\n            setSearchTypes(SEARCH_SECTIONS);\n        } else {\n            let availableSections = _.compact(_.map(props.searchTypes, function (item) {\n                let selectedSection = _.find(SEARCH_SECTIONS, function (section) {\n                    return _.isPlainObject(item) && !_.isEmpty(item) ? _.toLower(item.value) == _.toLower(section.value) : _.toLower(item) == _.toLower(section.value);\n                })\n                if (!selectedSection) {\n                    return null;\n                }\n\n                return _.isPlainObject(item) && !_.isEmpty(item) && _.get(item, ['text']) ? item : selectedSection;\n            }));\n            setSearchTypes(availableSections || [])\n        }\n    }, [props.searchTypes])\n\n\n    function handleSearch(value) {\n\n        // value = value.replace(/[\\W_]/g, \"\");\n        // value = value.replace(/[^a-zA-Z ]/g, \"\");\n        setDataSource([]);\n        setIsEmptyDataSource(true);\n        if (!value || value.length < WORD_LENGTH_TO_START_SEARCH) {\n            setSearchWords([]);\n        } else {\n            clearTimeout(typingTimeout);\n            setTypingTimeout(setTimeout(() => {\n                axios.post(`${client.io.io.uri}globalSearch`, {\n                    params: {\n                        keywords: value.trim(),\n                        filterType: _.map(searchTypes, 'value'),\n                    }\n                }).then(res => {\n                 \n                    let dataSource = [];\n\n                    _.forEach(searchTypes, function (v) {\n                        if (_.isArray(_.get(res, ['data', 'result', v.value, 'data'])) && !_.isEmpty(_.get(res, ['data', 'result', v.value, 'data']))) {\n                            setIsEmptyDataSource(false);\n                        }\n                        dataSource.push(\n                            {\n                                title: v.text,\n                                children: _.get(res, ['data', 'result', v.value, 'data']) || [],\n                                total: _.get(res, ['data', 'result', v.value, 'total']) || 0,\n                                value: v.value\n                            }\n                        )\n                    })\n                    setDataSource(dataSource);\n                    setSearchWords(notEmptyLength(value.split(' ')) ? value.split(' ') : []);\n                    setTypingTimeout();\n                }).catch(err => {\n                    message.error(err.message)\n                });\n            }, 700)\n            )\n        }\n    };\n\n    const renderTitle = (title, total) => {\n        return (\n            <span>\n                {title}\n                <a href=\"#\" style={{ float: 'right' }}>\n                    Total: {total}\n                </a>\n            </span>\n        );\n    }\n    const restructData = (data) => {\n        let base = [\n            <Option disabled key=\"all\" className=\"show-all\">\n                <Desktop>\n                    <p>\n                        Search Car/Dealer Name\n                    </p>\n                </Desktop>\n                <Tablet>\n                    <p>\n                        Search Car/Dealer Name\n                    </p>\n                </Tablet>\n                <Mobile>\n                    <p>\n                        Car/Dealer Name\n                    </p>\n                </Mobile>\n            </Option>\n        ];\n\n        if (notEmptyLength(data)) {\n            let list = data.map(group => {\n                switch (_.get(group, ['value'])) {\n                    // case 'carFreak':\n                    //     return (\n                    //         <OptGroup key={group.title} label={renderTitle(group.title, group.total)}>\n                    //             {\n                    //                 _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ?\n                    //                     group.children.map((opt, index) => (\n                    //                         <Option key={`${group.title}-${index}`} value={parseTagStringToPlainString(`${opt.title || ''} | ${opt.content || ''}`)} onClick={() => {\n                    //                             if (_.isPlainObject(opt)) {\n                    //                                 if (opt._id) {\n                    //                                     props.router.push('/car-freaks/' + opt._id);\n                    //                                 }\n                    //                             }\n                    //                         }}>\n                    //                             <Highlighter\n                    //                                 style={{ padding: '0px 10px' }}\n                    //                                 highlightStyle={{ color: '#ffc069', padding: 0 }}\n                    //                                 textToHighlight={parseTagStringToPlainString(`${opt.title || ''} | ${opt.content || ''}`)}\n                    //                                 autoEscape={true}\n                    //                                 className=\"overline\"\n                    //                                 searchWords={searchWords} />\n                    //                         </Option>\n                    //                     ))\n                    //                     :\n                    //                     <Option key={`${group.title}NotFound`} value={`${group.title}NotFound`} disabled>\n                    //                         <span className='d-inline-block overline' style={{ padding: '0px 10px' }} >\n                    //                             {group.title} Not Found\n                    //                         </span>\n                    //                     </Option>\n                    //             }\n                    //         </OptGroup>\n                    //     )\n                    //     break;\n                    case 'socialBoard':\n                        return (\n                            <OptGroup key={group.title} label={renderTitle(group.title, group.total)}>\n                                {\n                                    _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ?\n                                        group.children.map((opt, index) => (\n                                            <Option key={`${group.title}-${index}`} value={parseTagStringToPlainString(`${opt.title || ''} | ${opt.content || ''}`)} onClick={() => {\n                                                if (_.isPlainObject(opt)) {\n                                                    if (opt._id) {\n                                                        props.router.push('/social-board/' + opt._id);\n                                                    }\n                                                }\n                                            }}>\n                                                <Highlighter\n                                                    style={{ padding: '0px 10px' }}\n                                                    highlightStyle={{ color: '#ffc069', padding: 0 }}\n                                                    textToHighlight={parseTagStringToPlainString(`${opt.title || ''} | ${opt.content || ''}`)}\n                                                    autoEscape={true}\n                                                    className=\"overline\"\n                                                    searchWords={searchWords} />\n                                            </Option>\n                                        ))\n                                        :\n                                        <Option key={`${group.title}NotFound`} value={`${group.title}NotFound`} disabled>\n                                            <span className='d-inline-block overline' style={{ padding: '0px 10px' }} >\n                                                {group.title} Not Found\n                                                </span>\n                                        </Option>\n                                }\n                            </OptGroup>\n                        )\n                        break;\n                    case 'people':\n\n                        return (\n                            <OptGroup key={group.title} label={renderTitle(group.title, group.total)}>\n                                {\n                                    _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ?\n                                        group.children.map((opt, index) => (\n                                            <Option key={`${group.title}-${index}`} value={`${opt.freakId || ''}`} onClick={() => {\n                                                if (_.isPlainObject(opt) && !_.isEmpty(opt)) {\n                                                    if (opt.userurlId) {\n                                                        props.router.push(`/profile/${opt.userurlId}`);\n                                                    }\n                                                }\n                                            }}>\n                                                <Highlighter\n                                                    style={{ padding: '0px 10px' }}\n                                                    highlightStyle={{ color: '#ffc069', padding: 0 }}\n                                                    textToHighlight={`${opt.freakId || ''}`}\n                                                    autoEscape={true}\n                                                    className=\"overline\"\n                                                    searchWords={searchWords} />\n                                            </Option>\n                                        ))\n                                        :\n                                        <Option key={`${group.title}NotFound`} value={`${group.title}NotFound`} disabled>\n                                            <span className='d-inline-block overline' style={{ padding: '0px 10px' }} >\n                                                {group.title} Not Found\n                                        </span>\n                                        </Option>\n                                }\n                            </OptGroup>\n                        )\n                        break;\n                    case 'dealer':\n\n                        return (\n                            <OptGroup key={group.title} label={renderTitle(group.title, group.total)}>\n                                {\n                                    _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ?\n                                        group.children.map((opt, index) => (\n                                            <Option key={`${group.title}-${index}`} value={`${opt.freakId || ''}`} onClick={() => {\n                                                if (_.isPlainObject(opt) && !_.isEmpty(opt)) {\n                                                    if (opt._id) {\n                                                        props.router.push(`/dealer/${opt.companyurlId}/${opt.userurlId}`);\n                                                    }\n                                                }\n                                            }}>\n                                                <Highlighter\n                                                    style={{ padding: '0px 10px' }}\n                                                    highlightStyle={{ color: '#ffc069', padding: 0 }}\n                                                    textToHighlight={`${opt.freakId || ''}`}\n                                                    autoEscape={true}\n                                                    className=\"overline\"\n                                                    searchWords={searchWords} />\n                                            </Option>\n                                        ))\n                                        :\n                                        <Option key={`${group.title}NotFound`} value={`${group.title}NotFound`} disabled>\n                                            <span className='d-inline-block overline' style={{ padding: '0px 10px' }} >\n                                                {group.title} Not Found\n                                        </span>\n                                        </Option>\n                                }\n                            </OptGroup>\n                        )\n                    case 'productAds':\n                        return (\n                            <OptGroup key={group.title} label={renderTitle(group.title, group.total)}>\n                                {\n                                    _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ?\n                                        group.children.map((opt, index) => (\n                                            <Option key={`${group.title}-${index}`} value={`${opt.make ? opt.make : ''} ${opt.model ? opt.model : ''}`} onClick={(e) => {\n                                                let path = convertParameterToProductListUrl({ make: _.toLower(opt.make), model: _.toLower(opt.model) })\n                                                props.router.push(path);\n\n                                            }}>\n                                                <Highlighter\n                                                    style={{ padding: '0px 10px' }}\n                                                    highlightStyle={{ color: '#ffc069', padding: 0 }}\n                                                    textToHighlight={`${opt.make ? opt.make : ''} ${opt.model ? opt.model : ''} (${opt.total ? opt.total : ''})`}\n                                                    // textToHighlight={`${opt.title || ''} (${opt.total ? opt.total : ''})`}\n                                                    autoEscape={true}\n                                                    className=\"overline\"\n                                                    searchWords={searchWords} />\n                                            </Option>\n                                        ))\n                                        :\n                                        <Option key={`${group.title}NotFound`} value={`${group.title}NotFound`} disabled>\n                                            <span className='d-inline-block overline' style={{ padding: '0px 10px' }} >\n                                                {group.title} Not Found\n                                                </span>\n                                        </Option>\n                                }\n                            </OptGroup>\n                        )\n                        break;\n                    case 'carspec':\n                        return (\n                            <OptGroup key={group.title} label={renderTitle(group.title, group.total)}>\n                                {\n                                    _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ?\n                                        group.children.map((opt, index) => (\n                                            <Option key={`${group.title}-${index}`} value={`${opt.make ? opt.make : ''} ${opt.model ? opt.model : ''}`} onClick={() => {\n                                                props.router.push(`/newcar/details/${opt.make}/${opt.model}`);\n                                                window.location.reload()\n                                            }}>\n                                                <Highlighter\n                                                    style={{ padding: '0px 10px' }}\n                                                    highlightStyle={{ color: '#ffc069', padding: 0 }}\n                                                    textToHighlight={`${opt.make ? opt.make : ''} ${opt.model ? opt.model : ''}`}\n                                                    autoEscape={true}\n                                                    className=\"overline\"\n                                                    searchWords={searchWords} />\n                                            </Option>\n                                        ))\n                                        :\n                                        <Option key={`${group.title}NotFound`} value={`${group.title}NotFound`} disabled>\n                                            <span className='d-inline-block overline' style={{ padding: '0px 10px' }} >\n                                                {group.title} Not Found\n                                                </span>\n                                        </Option>\n                                }\n                            </OptGroup>\n                        )\n                    case 'dealerWithAds':\n                        return (\n                            <OptGroup key={group.title} label={renderTitle(group.title, group.total)}>\n                                {\n                                    _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ?\n                                        group.children.map((opt, index) => (\n                                            <Option key={`${group.title}-${index}`} value={`${opt.fullName || ''} | ${opt.companyName ? opt.companyName : ''}`} onClick={() => {\n                                                if (opt.companyurlId && opt.userurlId) {\n                                                    props.router.push(`/dealer/${_.get(opt, 'companyurlId')}/${_.get(opt, 'userurlId')}`);\n                                                }\n                                            }}>\n                                                <Highlighter\n                                                    style={{ padding: '0px 10px' }}\n                                                    highlightStyle={{ color: '#ffc069', padding: 0 }}\n                                                    textToHighlight={`${opt.fullName || ''} | ${opt.companyName ? opt.companyName : ''} (${formatNumber(opt.total, 'auto', true, 0, true)})`}\n                                                    autoEscape={true}\n                                                    className=\"overline\"\n                                                    searchWords={searchWords} />\n                                            </Option>\n                                        ))\n                                        :\n                                        <Option key={'notFoundCompany'} value={'notFoundCompany'} disabled>\n                                            <span className='d-inline-block overline' style={{ padding: '0px 10px' }} disabled>\n                                                {group.title} Not Found\n                                            </span>\n                                        </Option>\n                                }\n                            </OptGroup>\n                        )\n                    case 'company':\n                        return <OptGroup key={group.title} label={renderTitle(group.title, group.total)}>\n                            {\n                                _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ?\n                                    group.children.map((opt, index) => (\n                                        <Option key={`${group.title}-${index}`} onClick={() => { props.router.push('/profile/' + opt.userurlId); }}>\n                                            <Highlighter\n                                                style={{ padding: '0px 10px' }}\n                                                highlightStyle={{ color: '#ffc069', padding: 0 }}\n                                                textToHighlight={opt.name ? opt.name : ''}\n                                                autoEscape={true}\n                                                className=\"overline\"\n                                                searchWords={searchWords} />\n                                        </Option>\n                                    ))\n                                    :\n                                    <Option key={`${group.title}NotFound`} value={`${group.title}NotFound`} disabled>\n                                        <span className='d-inline-block overline' style={{ padding: '0px 10px' }} >\n                                            {group.title} Not Found\n                                            </span>\n                                    </Option>\n                            }\n                        </OptGroup>\n\n                    default:\n                        return (\n                            <OptGroup key={v4()} label={renderTitle('Others', group.total)}>\n                                {\n                                    _.isArray(_.get(group, ['children'])) && !_.isEmpty(_.get(group, ['children'])) ?\n                                        group.children.map((opt, index) => (\n                                            <Option key={`${group.title}-${index}`}>\n                                                <Highlighter\n                                                    style={{ padding: '0px 10px' }}\n                                                    highlightStyle={{ color: '#ffc069', padding: 0 }}\n                                                    textToHighlight={opt.value ? opt.value : ''}\n                                                    autoEscape={true}\n                                                    className=\"overline\"\n                                                    searchWords={searchWords} />\n                                            </Option>\n                                        ))\n                                        :\n                                        <Option key={`othersNotFound`} value={`othersNotFound`}>\n                                            <span className='d-inline-block overline' style={{ padding: '0px 10px' }} disabled>\n                                                Not Found\n                                            </span>\n                                        </Option>\n                                }\n                            </OptGroup>\n                        )\n                }\n            })\n\n            base = _.union(list, base);\n        }\n\n        return base;\n    }\n\n    return (\n        <React.Fragment>\n            <AutoComplete\n                className=\"certain-category-search layout-global-search\"\n                dropdownClassName=\"certain-category-search-dropdown group-item-scroll\"\n                // dropdownMatchSelectWidth={false}\n                dropdownStyle={{ width: 300 }}\n                // size=\"large\"\n                style={{ width: '100%' }}\n                ref={searchBarRef}\n                dataSource={restructData(dataSource)}\n                onSearch={handleSearch}\n                placeholder=\"Search here\"\n                optionLabelProp=\"value\"\n                open={!isEmptyDataSource && isFocused}\n                onChange={(value) => {\n                    setSearchValue(value);\n                }}\n                onSelect={() => {\n                    setIsFocused(false)\n                    setIsEmptyDataSource(true)\n                    if (searchBarRef.current) {\n                        searchBarRef.current.blur();\n                    }\n                }}\n                defaultActiveFirstOption={false}\n                onFocus={() => {\n                    setIsFocused(true)\n                }}\n                onBlur={() => {\n                    setIsFocused(false)\n                }}\n\n            >\n                <Input\n                    className=\"search-input\"\n                    border=\"false\"\n                    size=\"large\"\n                    value={searchValue}\n                    // onSearch={() => props.router.push('/cars-on-sale')}\n                    onPressEnter={(e) => {\n                        if (e.target.value) {\n                            // let path = `/cars-on-sale-search?page=${1}${`&${queryStringifyNestedObject({ title: searchValue })}`}`;\n                            if (props.enterSearchCarFreaks) {\n                                let text = e.target.value || '';\n                                let canSearchHashTag = false;\n                                if (text.indexOf('#') == 0 && arrayLengthCount(text.split(' ')) == 1) {\n                                    canSearchHashTag = true;\n                                }\n                                text = text.replace('#', '');\n                                if (canSearchHashTag) {\n                                    props.router.push(`/hashtag/${text}`);\n                                } else {\n                                    props.router.push(`/search-car-freaks?matchStr=${text}`);\n                                }\n                            } else {\n                                let path = convertParameterToProductListUrl({ title: searchValue });\n                                props.router.push(path);\n                            }\n                        }\n                    }}\n                    suffix={\n                        <SearchOutlined onClick={(e) => {\n                            // let path = `/cars-on-sale-search?page=${1}${`&${queryStringifyNestedObject({ title: searchValue })}`}`;\n                            let path = convertParameterToProductListUrl({ title: searchValue });\n                            props.router.push(path);\n                        }} />\n                    }\n                />\n            </AutoComplete>\n        </React.Fragment>\n    );\n}\n\n\nconst mapStateToProps = state => ({\n    app: state.app,\n    user: state.user,\n});\n\nconst mapDispatchToProps = {\n    loading,\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(GlobalSearchBar));"]},"metadata":{},"sourceType":"module"}